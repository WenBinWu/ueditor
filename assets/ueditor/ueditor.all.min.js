!function(){function getListener(a,b,c){var d;return b=b.toLowerCase(),(d=a.__allListeners||c&&(a.__allListeners={}))&&(d[b]||c&&(d[b]=[]))}function getDomNode(a,b,c,d,e,f){var h,g=d&&a[b];for(!g&&(g=a[c]);!g&&(h=(h||a).parentNode);){if("BODY"==h.tagName||f&&!f(h))return null;g=h[c]}return g&&e&&!e(g)?getDomNode(g,b,c,!1,e):g}var baidu,dom,browser,ie,webkit,gecko,opera,utils,EventBase,dtd,attrFix,styleBlock,domUtils,fillCharReg,filterWord,htmlparser,filterNode,keymap,LocalStorage;UEDITOR_CONFIG=window.UEDITOR_CONFIG||{},baidu=window.baidu||{},window.baidu=baidu,window.UE=baidu.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3",dom=UE.dom={},browser=UE.browser=function(){var d,e,f,g,a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(a),opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode};return c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera&&!c.ie,d=0,c.ie&&(e=a.match(/(?:msie\s([\w.]+))/),f=a.match(/(?:trident.*rv:([\w.]+))/),d=e&&f&&e[1]&&f[1]?Math.max(1*e[1],1*f[1]):e&&e[1]?1*e[1]:f&&f[1]?1*f[1]:0,c.ie11Compat=11==document.documentMode,c.ie9Compat=9==document.documentMode,c.ie8=!!document.documentMode,c.ie8Compat=8==document.documentMode,c.ie7Compat=7==d&&!document.documentMode||7==document.documentMode,c.ie6Compat=7>d||c.quirks,c.ie9above=d>8,c.ie9below=9>d,c.ie11above=d>10,c.ie11below=11>d),c.gecko&&(g=a.match(/rv:([\d\.]+)/),g&&(g=g[1].split("."),d=1e4*g[0]+100*(g[1]||0)+1*(g[2]||0))),/chrome\/(\d+\.\d)/i.test(a)&&(c.chrome=+RegExp["$1"]),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&(c.safari=+(RegExp["$1"]||RegExp["$2"])),c.opera&&(d=parseFloat(b.version())),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(a,b,c){var d,e,f;if(null!=a)if(a.length===+a.length){for(d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===!1)return!1}else for(f in a)if(a.hasOwnProperty(f)&&b.call(c,a[f],f,a)===!1)return!1},makeInstance:function(a){var b=new Function;return b.prototype=a,a=new b,b.prototype=null,a},extend:function(a,b,c){if(b)for(var d in b)c&&a.hasOwnProperty(d)||(a[d]=b[d]);return a},extend2:function(a){var c,d,e,b=arguments;for(c=1;c<b.length;c++){d=b[c];for(e in d)a.hasOwnProperty(e)||(a[e]=d[e])}return a},inherits:function(a,b){var c=a.prototype,d=utils.makeInstance(b.prototype);return utils.extend(d,c,!0),a.prototype=d,d.constructor=a},bind:function(a,b){return function(){return a.apply(b,arguments)}},defer:function(a,b,c){var d;return function(){c&&clearTimeout(d),d=setTimeout(a,b)}},indexOf:function(a,b,c){var d=-1;return c=this.isNumber(c)?c:0,this.each(a,function(a,e){return e>=c&&a===b?(d=e,!1):void 0}),d},removeItem:function(a,b){for(var c=0,d=a.length;d>c;c++)a[c]===b&&(a.splice(c,1),c--)},trim:function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(a){if(!a)return{};a=utils.isArray(a)?a:a.split(",");for(var c,b=0,d={};c=a[b++];)d[c.toUpperCase()]=d[c]=1;return d},unhtml:function(a,b){return a?a.replace(b||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(a){return a?a.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[a]}):""},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b={"float":void 0!=a.cssFloat?"cssFloat":void 0!=a.styleFloat?"styleFloat":"float"};return function(a){return b[a]||(b[a]=a.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),loadFile:function(){function b(b,c){try{for(var e,d=0;e=a[d++];)if(e.doc===b&&e.url==(c.src||c.href))return e}catch(f){return null}}var a=[];return function(c,d,e){var g,h,i,f=b(c,d);if(f)return f.ready?e&&e():f.funs.push(e),void 0;if(a.push({doc:c,url:d.src||d.href,funs:[e]}),!c.body){g=[];for(h in d)"tag"!=h&&g.push(h+'="'+d[h]+'"');return c.write("<"+d.tag+" "+g.join(" ")+" ></"+d.tag+">"),void 0}if(!d.id||!c.getElementById(d.id)){i=c.createElement(d.tag),delete d.tag;for(h in d)i.setAttribute(h,d[h]);i.onload=i.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(f=b(c,d),f.funs.length>0){f.ready=1;for(var a;a=f.funs.pop();)a()}i.onload=i.onreadystatechange=null}},i.onerror=function(){throw Error("The load "+(d.href||d.src)+" fails,check the url settings of file ueditor.config.js ")},c.getElementsByTagName("head")[0].appendChild(i)}}}(),isEmptyObject:function(a){if(null==a)return!0;if(this.isArray(a)||this.isString(a))return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},fixColor:function(a,b){var c,e,d;if(/color/i.test(a)&&/rgba?/.test(b)){if(c=b.split(","),c.length>3)return"";for(b="#",d=0;e=c[d++];)e=parseInt(e.replace(/[^\d]/gi,""),10).toString(16),b+=1==e.length?"0"+e:e;b=b.toUpperCase()}return b},optCss:function(a){function e(a,b){var c,d,e,f,g,h;if(!a)return"";if(c=a.top,d=a.bottom,e=a.left,f=a.right,g="",c&&e&&d&&f)g+=";"+b+":"+(c==d&&d==e&&e==f?c:c==d&&e==f?c+" "+e:e==f?c+" "+e+" "+d:c+" "+f+" "+d+" "+e)+";";else for(h in a)g+=";"+b+"-"+h+":"+a[h]+";";return g}var b,c;return a=a.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(a,d,e,f){if(1==f.split(" ").length)switch(d){case"padding":return!b&&(b={}),b[e]=f,"";case"margin":return!c&&(c={}),c[e]=f,"";case"border":return"initial"==f?"":a}return a}),a+=e(b,"padding")+e(c,"margin"),a.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},clone:function(a,b){var c,d;b=b||{};for(d in a)a.hasOwnProperty(d)&&(c=a[d],"object"==typeof c?(b[d]=utils.isArray(c)?[]:{},utils.clone(a[d],b[d])):b[d]=c);return b},transUnitToPx:function(a){if(!/(pt|cm)/.test(a))return a;var b;switch(a.replace(/([\d.]+)(\w+)/,function(c,d,e){a=d,b=e}),b){case"cm":a=25*parseFloat(a);break;case"pt":a=Math.round(96*parseFloat(a)/72)}return a+(a?"px":"")},domReady:function(){function b(b){b.isReady=!0;for(var c;c=a.pop();c());}var a=[];return function(c,d){d=d||window;var e=d.document;c&&a.push(c),"complete"===e.readyState?b(e):(e.isReady&&b(e),browser.ie&&11!=browser.version?(function(){if(!e.isReady){try{e.documentElement.doScroll("left")}catch(a){return setTimeout(arguments.callee,0),void 0}b(e)}}(),d.attachEvent("onload",function(){b(e)})):(e.addEventListener("DOMContentLoaded",function(){e.removeEventListener("DOMContentLoaded",arguments.callee,!1),b(e)},!1),d.addEventListener("load",function(){b(e)},!1)))}}(),cssRule:browser.ie&&11!=browser.version?function(a,b,c){var d,e;return void 0===b||b&&b.nodeType&&9==b.nodeType?(c=b&&b.nodeType&&9==b.nodeType?b:c||document,d=c.indexList||(c.indexList={}),e=d[a],void 0!==e?c.styleSheets[e].cssText:void 0):(c=c||document,d=c.indexList||(c.indexList={}),e=d[a],""===b?void 0!==e?(c.styleSheets[e].cssText="",delete d[a],!0):!1:(void 0!==e?sheetStyle=c.styleSheets[e]:(sheetStyle=c.createStyleSheet("",e=c.styleSheets.length),d[a]=e),sheetStyle.cssText=b,void 0))}:function(a,b,c){var e;return void 0===b||b&&b.nodeType&&9==b.nodeType?(c=b&&b.nodeType&&9==b.nodeType?b:c||document,e=c.getElementById(a),e?e.innerHTML:void 0):(c=c||document,e=c.getElementById(a),""===b?e?(e.parentNode.removeChild(e),!0):!1:(e?e.innerHTML=b:(e=c.createElement("style"),e.id=a,e.innerHTML=b,c.getElementsByTagName("head")[0].appendChild(e)),void 0))},sort:function(a,b){var c,d,e,f,g;for(b=b||function(a,b){return a.localeCompare(b)},c=0,d=a.length;d>c;c++)for(e=c,f=a.length;f>e;e++)b(a[c],a[e])>0&&(g=a[c],a[c]=a[e],a[e]=g);return a},serializeParam:function(a){var c,d,b=[];for(c in a)if("method"!=c&&"timeout"!=c&&"async"!=c)if("function"!=(typeof a[c]).toLowerCase()&&"object"!=(typeof a[c]).toLowerCase())b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));else if(utils.isArray(a[c]))for(d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"[]="+encodeURIComponent(a[c][d]));return b.join("&")},formatUrl:function(a){var b=a.replace(/&&/g,"&");return b=b.replace(/\?&/g,"?"),b=b.replace(/&$/g,""),b=b.replace(/&#/g,"#"),b=b.replace(/&+/g,"&")},isCrossDomainUrl:function(a){var b=document.createElement("a");return b.href=a,browser.ie&&(b.href=b.href),!(b.protocol==location.protocol&&b.hostname==location.hostname&&(b.port==location.port||"80"==b.port&&""==location.port||""==b.port&&"80"==location.port))},clearEmptyAttrs:function(a){for(var b in a)""===a[b]&&delete a[b];return a},str2json:function(a){return utils.isString(a)?window.JSON?JSON.parse(a):new Function("return "+utils.trim(a||""))():null},json2str:function(){function b(b){return/["\\\x00-\x1f]/.test(b)&&(b=b.replace(/["\\\x00-\x1f]/g,function(b){var c=a[b];return c?c:(c=b.charCodeAt(),"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16))})),'"'+b+'"'}function c(a){var d,e,f,b=["["],c=a.length;for(e=0;c>e;e++)switch(f=a[e],typeof f){case"undefined":case"function":case"unknown":break;default:d&&b.push(","),b.push(utils.json2str(f)),d=1}return b.push("]"),b.join("")}function d(a){return 10>a?"0"+a:a}function e(a){return'"'+a.getFullYear()+"-"+d(a.getMonth()+1)+"-"+d(a.getDate())+"T"+d(a.getHours())+":"+d(a.getMinutes())+":"+d(a.getSeconds())+'"'}if(window.JSON)return JSON.stringify;var a={"\b":"\\b","  ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(a){var g,h,d,f,i;switch(typeof a){case"undefined":return"undefined";case"number":return isFinite(a)?String(a):"null";case"string":return b(a);case"boolean":return String(a);default:if(null===a)return"null";if(utils.isArray(a))return c(a);if(utils.isDate(a))return e(a);d=["{"],f=utils.json2str;for(i in a)if(Object.prototype.hasOwnProperty.call(a,i))switch(h=a[i],typeof h){case"undefined":case"unknown":case"function":break;default:g&&d.push(","),g=1,d.push(f(i)+":"+f(h))}return d.push("}"),d.join("")}}}()},utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(a){UE.utils["is"+a]=function(b){return Object.prototype.toString.apply(b)=="[object "+a+"]"}}),EventBase=UE.EventBase=function(){},EventBase.prototype={addListener:function(a,b){a=utils.trim(a).split(/\s+/);for(var d,c=0;d=a[c++];)getListener(this,d,!0).push(b)},on:function(a,b){return this.addListener(a,b)},off:function(a,b){return this.removeListener(a,b)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(a,b){a=utils.trim(a).split(/\s+/);for(var d,c=0;d=a[c++];)utils.removeItem(getListener(this,d)||[],b)},fireEvent:function(){var c,b,e,f,g,d,a=arguments[0];for(a=utils.trim(a).split(" "),b=0;c=a[b++];){if(d=getListener(this,c))for(g=d.length;g--;)if(d[g]){if(f=d[g].apply(this,arguments),f===!0)return f;void 0!==f&&(e=f)}(f=this["on"+c.toLowerCase()])&&(e=f.apply(this,arguments))}return e}},dtd=dom.dtd=function(){function a(a){for(var b in a)a[b.toUpperCase()]=a[b];return a}var b=utils.extend2,c=a({isindex:1,fieldset:1}),d=a({input:1,button:1,select:1,textarea:1,label:1}),e=b(a({a:1}),d),f=b({iframe:1},e),g=a({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),h=a({ins:1,del:1,script:1,style:1}),i=b(a({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),h),j=b(a({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),i),k=b(a({p:1}),j),l=b(a({iframe:1}),j,d),m=a({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),n=b(a({a:0}),l),o=a({tr:1}),p=a({"#":1}),q=b(a({param:1}),m),r=b(a({form:1}),c,f,g,k),s=a({li:1,ol:1,ul:1}),t=a({style:1,script:1}),u=a({base:1,link:1,meta:1,title:1}),v=b(u,t),w=a({head:1,body:1}),x=a({html:1}),y=a({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),z=a({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return a({$nonBodyContent:b(x,w,u),$block:y,$inline:n,$inlineWithA:b(a({a:1}),n),$body:b(a({script:1,style:1}),y),$cdata:a({script:1,style:1}),$empty:z,$nonChild:a({iframe:1,textarea:1}),$listItem:a({dd:1,dt:1,li:1}),$list:a({ul:1,ol:1,dl:1}),$isNotEmpty:a({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:a({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:a({p:1,div:1}),$tableContent:a({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:a({pre:1,script:1,style:1,textarea:1}),html:w,head:v,style:p,script:p,body:r,base:{},link:{},meta:{},title:p,col:{},tr:a({td:1,th:1}),img:{},embed:{},colgroup:a({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:r,td:r,br:{},th:r,center:r,kbd:n,button:b(k,g),basefont:{},h5:n,h4:n,samp:n,h6:n,ol:s,h1:n,h3:n,option:p,h2:n,form:b(c,f,g,k),select:a({optgroup:1,option:1}),font:n,ins:n,menu:s,abbr:n,label:n,table:a({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:n,tfoot:o,cite:n,li:r,input:{},iframe:r,strong:n,textarea:p,noframes:r,big:n,small:n,span:a({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:n,dt:n,sub:n,optgroup:a({option:1}),param:{},bdo:n,"var":n,div:r,object:q,sup:n,dd:r,strike:n,area:{},dir:s,map:b(a({area:1,form:1,p:1}),c,h,g),applet:q,dl:a({dt:1,dd:1}),del:n,isindex:{},fieldset:b(a({legend:1}),m),thead:o,ul:s,acronym:n,b:n,a:b(a({a:1}),l),blockquote:b(a({td:1,tr:1,tbody:1,li:1}),r),caption:n,i:n,u:n,tbody:o,s:n,address:b(f,k),tt:n,legend:n,q:n,pre:b(i,e),p:b(a({a:1}),n),em:n,dfn:n})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&"6"==browser.version?"﻿":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(a,b){var c,d,e,f;if(a===b)return 0;for(d=[a],e=[b],c=a;c=c.parentNode;){if(c===b)return 10;d.push(c)}for(c=b;c=c.parentNode;){if(c===a)return 20;e.push(c)}if(d.reverse(),e.reverse(),d[0]!==e[0])return 1;for(f=-1;f++,d[f]===e[f];);for(a=d[f],b=e[f];a=a.nextSibling;)if(a===b)return 4;return 2},getNodeIndex:function(a,b){for(var c=a,d=0;c=c.previousSibling;)b&&3==c.nodeType?c.nodeType!=c.nextSibling.nodeType&&d++:d++;return d},inDoc:function(a,b){return 10==domUtils.getPosition(a,b)},findParent:function(a,b,c){if(a&&!domUtils.isBody(a))for(a=c?a:a.parentNode;a;){if(!b||b(a)||domUtils.isBody(a))return b&&!b(a)&&domUtils.isBody(a)?null:a;a=a.parentNode}return null},findParentByTagName:function(a,b,c,d){return b=utils.listToMap(utils.isArray(b)?b:[b]),domUtils.findParent(a,function(a){return b[a.tagName]&&!(d&&d(a))},c)},findParents:function(a,b,c,d){for(var e=b&&(c&&c(a)||!c)?[a]:[];a=domUtils.findParent(a,c);)e.push(a);return d?e:e.reverse()},insertAfter:function(a,b){return a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)},remove:function(a,b){var d,c=a.parentNode;if(c){if(b&&a.hasChildNodes())for(;d=a.firstChild;)c.insertBefore(d,a);c.removeChild(a)}return a},getNextDomNode:function(a,b,c,d){return getDomNode(a,"firstChild","nextSibling",b,c,d)},getPreDomNode:function(a,b,c,d){return getDomNode(a,"lastChild","previousSibling",b,c,d)},isBookmarkNode:function(a){return 1==a.nodeType&&a.id&&/^_baidu_bookmark_/i.test(a.id)},getWindow:function(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow},getCommonAncestor:function(a,b){if(a===b)return a;for(var c=[a],d=[b],e=a,f=-1;e=e.parentNode;){if(e===b)return e;c.push(e)}for(e=b;e=e.parentNode;){if(e===a)return e;d.push(e)}for(c.reverse(),d.reverse();f++,c[f]===d[f];);return 0==f?null:c[f-1]},clearEmptySibling:function(a,b,c){function d(a,b){for(var c;a&&!domUtils.isBookmarkNode(a)&&(domUtils.isEmptyInlineElement(a)||!new RegExp("[^  \n\r"+domUtils.fillChar+"]").test(a.nodeValue));)c=a[b],domUtils.remove(a),a=c}!b&&d(a.nextSibling,"nextSibling"),!c&&d(a.previousSibling,"previousSibling")},split:function(a,b){var d,e,f,c=a.ownerDocument;return browser.ie&&b==a.nodeValue.length?(d=c.createTextNode(""),domUtils.insertAfter(a,d)):(e=a.splitText(b),browser.ie8&&(f=c.createTextNode(""),domUtils.insertAfter(e,f),domUtils.remove(f)),e)},isWhitespace:function(a){return!new RegExp("[^   \n\r"+domUtils.fillChar+"]").test(a.nodeValue)},getXY:function(a){for(var b=0,c=0;a.offsetParent;)c+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;return{x:b,y:c}},on:function(a,b,c){var f,g,d=utils.isArray(b)?b:utils.trim(b).split(/\s+/),e=d.length;if(e)for(;e--;)b=d[e],a.addEventListener?a.addEventListener(b,c,!1):(c._d||(c._d={els:[]}),f=b+c.toString(),g=utils.indexOf(c._d.els,a),c._d[f]&&-1!=g||(-1==g&&c._d.els.push(a),c._d[f]||(c._d[f]=function(a){return c.call(a.srcElement,a||window.event)}),a.attachEvent("on"+b,c._d[f])));a=null},un:function(a,b,c){var f,h,d=utils.isArray(b)?b:utils.trim(b).split(/\s+/),e=d.length;if(e)for(;e--;)if(b=d[e],a.removeEventListener)a.removeEventListener(b,c,!1);else{f=b+c.toString();try{a.detachEvent("on"+b,c._d?c._d[f]:c)}catch(g){}c._d&&c._d[f]&&(h=utils.indexOf(c._d.els,a),-1!=h&&c._d.els.splice(h,1),0==c._d.els.length&&delete c._d[f])}},isSameElement:function(a,b){var c,d,e,f,g,h,i;if(a.tagName!=b.tagName)return!1;if(c=a.attributes,d=b.attributes,!ie&&c.length!=d.length)return!1;for(g=0,h=0,i=0;e=c[i++];){if("style"==e.nodeName){if(e.specified&&g++,domUtils.isSameStyle(a,b))continue;return!1}if(ie){if(!e.specified)continue;g++,f=d.getNamedItem(e.nodeName)}else f=b.attributes[e.nodeName];if(!f.specified||e.nodeValue!=f.nodeValue)return!1}if(ie){for(i=0;f=d[i++];)f.specified&&h++;if(g!=h)return!1}return!0},isSameStyle:function(a,b){var e,g,f,c=a.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),d=b.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){if(c=a.style,d=b.style,c.length!=d.length)return!1;for(e in c)if(!/^(\d+|csstext)$/i.test(e)&&c[e]!=d[e])return!1;return!0}if(!c||!d)return c==d;if(c=c.split(";"),d=d.split(";"),c.length!=d.length)return!1;for(f=0;g=c[f++];)if(-1==utils.indexOf(d,g))return!1;return!0},isBlockElm:function(a){return 1==a.nodeType&&(dtd.$block[a.tagName]||styleBlock[domUtils.getComputedStyle(a,"display")])&&!dtd.$nonChild[a.tagName]},isBody:function(a){return a&&1==a.nodeType&&"body"==a.tagName.toLowerCase()},breakParent:function(a,b){var c,f,g,d=a,e=a;do{for(d=d.parentNode,f?(c=d.cloneNode(!1),c.appendChild(f),f=c,c=d.cloneNode(!1),c.appendChild(g),g=c):(f=d.cloneNode(!1),g=f.cloneNode(!1));c=e.previousSibling;)f.insertBefore(c,f.firstChild);for(;c=e.nextSibling;)g.appendChild(c);e=d}while(b!==d);return c=b.parentNode,c.insertBefore(f,b),c.insertBefore(g,b),c.insertBefore(a,g),domUtils.remove(b),a},isEmptyInlineElement:function(a){if(1!=a.nodeType||!dtd.$removeEmpty[a.tagName])return 0;for(a=a.firstChild;a;){if(domUtils.isBookmarkNode(a))return 0;if(1==a.nodeType&&!domUtils.isEmptyInlineElement(a)||3==a.nodeType&&!domUtils.isWhitespace(a))return 0;a=a.nextSibling}return 1},trimWhiteTextNode:function(a){function b(b){for(var c;(c=a[b])&&3==c.nodeType&&domUtils.isWhitespace(c);)a.removeChild(c)}b("firstChild"),b("lastChild")},mergeChild:function(a,b,c){var f,e,g,i,h,d=domUtils.getElementsByTagName(a,a.tagName.toLowerCase());for(e=0;f=d[e++];)if(f.parentNode&&!domUtils.isBookmarkNode(f))if("span"!=f.tagName.toLowerCase())domUtils.isSameElement(a,f)&&domUtils.remove(f,!0);else{if(a===f.parentNode&&(domUtils.trimWhiteTextNode(a),1==a.childNodes.length)){a.style.cssText=f.style.cssText+";"+a.style.cssText,domUtils.remove(f,!0);continue}if(f.style.cssText=a.style.cssText+";"+f.style.cssText,c&&(g=c.style))for(g=g.split(";"),h=0;i=g[h++];)f.style[utils.cssStyleToDomStyle(i.split(":")[0])]=i.split(":")[1];domUtils.isSameStyle(f,a)&&domUtils.remove(f,!0)}},getElementsByTagName:function(a,b,c){var d,e,g,f,h,j,i;for(c&&utils.isString(c)&&(d=c,c=function(a){return domUtils.hasClass(a,d)}),b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" "),e=[],f=0;g=b[f++];)for(h=a.getElementsByTagName(g),i=0;j=h[i++];)(!c||c(j))&&e.push(j);return e},mergeToParent:function(a){for(var b=a.parentNode;b&&dtd.$removeEmpty[b.tagName];){if(b.tagName==a.tagName||"A"==b.tagName){if(domUtils.trimWhiteTextNode(b),"SPAN"==b.tagName&&!domUtils.isSameStyle(b,a)||"A"==b.tagName&&"SPAN"==a.tagName){if(b.childNodes.length>1||b!==a.parentNode){a.style.cssText=b.style.cssText+";"+a.style.cssText,b=b.parentNode;continue}b.style.cssText+=";"+a.style.cssText,"A"==b.tagName&&(b.style.textDecoration="underline")}if("A"!=b.tagName){b===a.parentNode&&domUtils.remove(a,!0);break}}b=b.parentNode}},mergeSibling:function(a,b,c){function d(a,b,c){var d;if((d=c[a])&&!domUtils.isBookmarkNode(d)&&1==d.nodeType&&domUtils.isSameElement(c,d)){for(;d.firstChild;)"firstChild"==b?c.insertBefore(d.lastChild,c.firstChild):c.appendChild(d.firstChild);domUtils.remove(d)}}!b&&d("previousSibling","firstChild",a),!c&&d("nextSibling","lastChild",a)},unSelectable:ie&&browser.ie9below||browser.opera?function(a){a.onselectstart=function(){return!1},a.onclick=a.onkeyup=a.onkeydown=function(){return!1},a.unselectable="on",a.setAttribute("unselectable","on");for(var c,b=0;c=a.all[b++];)switch(c.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:c.unselectable="on",a.setAttribute("unselectable","on")}}:function(a){a.style.MozUserSelect=a.style.webkitUserSelect=a.style.msUserSelect=a.style.KhtmlUserSelect="none"},removeAttributes:function(a,b){var d,c,e;for(b=utils.isArray(b)?b:utils.trim(b).replace(/[ ]{2,}/g," ").split(" "),c=0;d=b[c++];){switch(d=attrFix[d]||d){case"className":a[d]="";break;case"style":a.style.cssText="",e=a.getAttributeNode("style"),!browser.ie&&e&&a.removeAttributeNode(e)}a.removeAttribute(d)}},createElement:function(a,b,c){return domUtils.setAttributes(a.createElement(b),c)},setAttributes:function(a,b){var c,d;for(c in b)if(b.hasOwnProperty(c))switch(d=b[c],c){case"class":a.className=d;break;case"style":a.style.cssText=a.style.cssText+";"+d;break;case"innerHTML":a[c]=d;break;case"value":a.value=d;break;default:a.setAttribute(attrFix[c]||c,d)}return a},getComputedStyle:function(a,b){var d,e,f,c="width height top left";if(c.indexOf(b)>-1)return a["offset"+b.replace(/^\w/,function(a){return a.toUpperCase()})]+"px";if(3==a.nodeType&&(a=a.parentNode),browser.ie&&browser.version<9&&"font-size"==b&&!a.style.fontSize&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName])return d=a.ownerDocument.createElement("span"),d.style.cssText="padding:0;border:0;font-family:simsun;",d.innerHTML=".",a.appendChild(d),e=d.offsetHeight,a.removeChild(d),d=null,e+"px";try{f=domUtils.getStyle(a,b)||(window.getComputedStyle?domUtils.getWindow(a).getComputedStyle(a,"").getPropertyValue(b):(a.currentStyle||a.style)[utils.cssStyleToDomStyle(b)])}catch(g){return""}return utils.transUnitToPx(utils.fixColor(b,f))},removeClasses:function(a,b){b=utils.isArray(b)?b:utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var d,c=0,e=a.className;d=b[c++];)e=e.replace(new RegExp("\\b"+d+"\\b"),"");e=utils.trim(e).replace(/[ ]{2,}/g," "),e?a.className=e:domUtils.removeAttributes(a,["class"])},addClass:function(a,b){if(a){b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var d,c=0,e=a.className;d=b[c++];)new RegExp("\\b"+d+"\\b").test(e)||(e+=" "+d);a.className=utils.trim(e)}},hasClass:function(a,b){if(utils.isRegExp(b))return b.test(a.className);b=utils.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var d,c=0,e=a.className;d=b[c++];)if(!new RegExp("\\b"+d+"\\b","i").test(e))return!1;return c-1==b.length},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},removeStyle:function(a,b){browser.ie?("color"==b&&(b="(^|;)"+b),a.style.cssText=a.style.cssText.replace(new RegExp(b+"[^:]*:[^;]+;?","ig"),"")):a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(utils.cssStyleToDomStyle(b)),a.style.cssText||domUtils.removeAttributes(a,["style"])},getStyle:function(a,b){var c=a.style[utils.cssStyleToDomStyle(b)];return utils.fixColor(b,c)},setStyle:function(a,b,c){a.style[utils.cssStyleToDomStyle(b)]=c,utils.trim(a.style.cssText)||this.removeAttributes(a,"style")},setStyles:function(a,b){for(var c in b)b.hasOwnProperty(c)&&domUtils.setStyle(a,c,b[c])},removeDirtyAttr:function(a){for(var c,b=0,d=a.getElementsByTagName("*");c=d[b++];)c.removeAttribute("_moz_dirty");a.removeAttribute("_moz_dirty")},getChildCount:function(a,b){var c=0,d=a.firstChild;for(b=b||function(){return 1};d;)b(d)&&c++,d=d.nextSibling;return c},isEmptyNode:function(a){return!a.firstChild||0==domUtils.getChildCount(a,function(a){return!domUtils.isBr(a)&&!domUtils.isBookmarkNode(a)&&!domUtils.isWhitespace(a)})},clearSelectedArr:function(a){for(var b;b=a.pop();)domUtils.removeAttributes(b,["class"])},scrollToView:function(a,b,c){var h,i,d=function(){var a=b.document,c="CSS1Compat"==a.compatMode;return{width:(c?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(c?a.documentElement.clientHeight:a.body.clientHeight)||0}},e=function(a){if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}},f=d().height,g=-1*f+c;g+=a.offsetHeight||0,h=domUtils.getXY(a),g+=h.y,i=e(b).y,(g>i||i-f>g)&&b.scrollTo(0,g+(0>g?-20:20))},isBr:function(a){return 1==a.nodeType&&"BR"==a.tagName},isFillChar:function(a,b){if(3!=a.nodeType)return!1;var c=a.nodeValue;return b?new RegExp("^"+domUtils.fillChar).test(c):!c.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(a){var e,f,g,b=a.cloneRange(),c=0,d=b.startContainer;if(1==d.nodeType&&d.childNodes[b.startOffset])for(d=d.childNodes[b.startOffset],f=d.previousSibling;f&&domUtils.isFillChar(f);)d=f,f=f.previousSibling;for(this.isFillChar(d,!0)&&1==b.startOffset&&(b.setStartBefore(d),d=b.startContainer);d&&domUtils.isFillChar(d);)e=d,d=d.previousSibling;for(e&&(b.setStartBefore(e),d=b.startContainer),1==d.nodeType&&domUtils.isEmptyNode(d)&&1==b.startOffset&&b.setStart(d,0).collapse(!0);!b.startOffset;){if(d=b.startContainer,domUtils.isBlockElm(d)||domUtils.isBody(d)){c=1;break}if(f=b.startContainer.previousSibling){for(;f&&domUtils.isFillChar(f);)g=f,f=f.previousSibling;g?b.setStartBefore(g):b.setStartBefore(b.startContainer)}else b.setStartBefore(b.startContainer)}return c&&!domUtils.isBody(b.startContainer)?1:0},isEmptyBlock:function(a,b){if(1!=a.nodeType)return 0;if(b=b||new RegExp("[   \r\n"+domUtils.fillChar+"]","g"),a[browser.ie?"innerText":"textContent"].replace(b,"").length>0)return 0;for(var c in dtd.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1},setViewportOffset:function(a,b){var c=0|parseInt(a.style.left),d=0|parseInt(a.style.top),e=a.getBoundingClientRect(),f=b.left-e.left,g=b.top-e.top;f&&(a.style.left=c+f+"px"),g&&(a.style.top=d+g+"px")},fillNode:function(a,b){var c=browser.ie?a.createTextNode(domUtils.fillChar):a.createElement("br");b.innerHTML="",b.appendChild(c)},moveChild:function(a,b,c){for(;a.firstChild;)c&&b.firstChild?b.insertBefore(a.lastChild,b.firstChild):b.appendChild(a.firstChild)},hasNoAttributes:function(a){return browser.ie?/^<\w+\s*?>/.test(a.outerHTML):0==a.attributes.length},isCustomeNode:function(a){return 1==a.nodeType&&a.getAttribute("_ue_custom_node_")},isTagNode:function(a,b){return 1==a.nodeType&&new RegExp("\\b"+a.tagName+"\\b","i").test(b)},filterNodeList:function(a,b,c){var e,d=[];return utils.isFunction(b)||(e=b,b=function(a){return-1!=utils.indexOf(utils.isArray(e)?e:e.split(" "),a.tagName.toLowerCase())}),utils.each(a,function(a){b(a)&&d.push(a)}),0==d.length?null:1!=d.length&&c?d:d[0]},isInNodeEndBoundary:function(a,b){var c=a.startContainer;if(3==c.nodeType&&a.startOffset!=c.nodeValue.length)return 0;if(1==c.nodeType&&a.startOffset!=c.childNodes.length)return 0;for(;c!==b;){if(c.nextSibling)return 0;c=c.parentNode}return 1},isBoundaryNode:function(a,b){for(var c;!domUtils.isBody(a);)if(c=a,a=a.parentNode,c!==a[b])return!1;return!0},fillHtml:browser.ie11below?"&nbsp;":"<br/>"},fillCharReg=new RegExp(domUtils.fillChar,"g"),function(){function d(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer===a.endContainer&&a.startOffset==a.endOffset}function e(a){return!a.collapsed&&1==a.startContainer.nodeType&&a.startContainer===a.endContainer&&1==a.endOffset-a.startOffset}function f(a,b,c,e){return 1==b.nodeType&&(dtd.$empty[b.tagName]||dtd.$nonChild[b.tagName])&&(c=domUtils.getNodeIndex(b)+(a?0:1),b=b.parentNode),a?(e.startContainer=b,e.startOffset=c,e.endContainer||e.collapse(!0)):(e.endContainer=b,e.endOffset=c,e.startContainer||e.collapse(!1)),d(e),e}function g(a,b){var i,j,k,l,m,n,o,p,r,q,s,c=a.startContainer,d=a.endContainer,e=a.startOffset,f=a.endOffset,g=a.document,h=g.createDocumentFragment();if(1==c.nodeType&&(c=c.childNodes[e]||(i=c.appendChild(g.createTextNode("")))),1==d.nodeType&&(d=d.childNodes[f]||(j=d.appendChild(g.createTextNode("")))),c===d&&3==c.nodeType)return h.appendChild(g.createTextNode(c.substringData(e,f-e))),b&&(c.deleteData(e,f-e),a.collapse(!0)),h;for(m=h,n=domUtils.findParents(c,!0),o=domUtils.findParents(d,!0),p=0;n[p]==o[p];)p++;for(q=p;r=n[q];q++){for(k=r.nextSibling,r==c?i||(3==a.startContainer.nodeType?(m.appendChild(g.createTextNode(c.nodeValue.slice(e))),b&&c.deleteData(e,c.nodeValue.length-e)):m.appendChild(b?c:c.cloneNode(!0))):(l=r.cloneNode(!1),m.appendChild(l));k&&k!==d&&k!==o[q];)r=k.nextSibling,m.appendChild(b?k:k.cloneNode(!0)),k=r;m=l}for(m=h,n[p]||(m.appendChild(n[p-1].cloneNode(!1)),m=m.firstChild),q=p;s=o[q];q++){if(k=s.previousSibling,s==d?j||3!=a.endContainer.nodeType||(m.appendChild(g.createTextNode(d.substringData(0,f))),b&&d.deleteData(0,f)):(l=s.cloneNode(!1),m.appendChild(l)),q!=p||!n[p])for(;k&&k!==c;)s=k.previousSibling,m.insertBefore(b?k:k.cloneNode(!0),m.firstChild),k=s;m=l}return b&&a.setStartBefore(o[p]?n[p]?o[p]:n[p-1]:o[p-1]).collapse(!0),i&&domUtils.remove(i),j&&domUtils.remove(j),h}function i(a,b){try{if(c&&domUtils.inDoc(c,a))if(c.nodeValue.replace(fillCharReg,"").length)c.nodeValue=c.nodeValue.replace(fillCharReg,"");else{var d=c.parentNode;for(domUtils.remove(c);d&&domUtils.isEmptyInlineElement(d)&&(browser.safari?!(domUtils.getPosition(d,b)&domUtils.POSITION_CONTAINS):!d.contains(b));)c=d.parentNode,domUtils.remove(d),d=c}}catch(e){}}function j(a,b){var c;for(a=a[b];a&&domUtils.isFillChar(a);)c=a[b],domUtils.remove(a),a=c
}var c,a=0,b=domUtils.fillChar,h=dom.Range=function(a){var b=this;b.startContainer=b.startOffset=b.endContainer=b.endOffset=null,b.document=a,b.collapsed=!0};h.prototype={cloneContents:function(){return this.collapsed?null:g(this,0)},deleteContents:function(){var a;return this.collapsed||g(this,1),browser.webkit&&(a=this.startContainer,3!=a.nodeType||a.nodeValue.length||(this.setStartBefore(a).collapse(!0),domUtils.remove(a))),this},extractContents:function(){return this.collapsed?null:g(this,2)},setStart:function(a,b){return f(!0,a,b,this)},setEnd:function(a,b){return f(!1,a,b,this)},setStartAfter:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a)+1)},setEndBefore:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a))},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},setEndAtFirst:function(a){return this.setEnd(a,0)},setEndAtLast:function(a){return this.setEnd(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEndAtLast(a)},cloneRange:function(){var a=this;return new h(a.document).setStart(a.startContainer,a.startOffset).setEnd(a.endContainer,a.endOffset)},collapse:function(a){var b=this;return a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0,b},shrinkBoundary:function(a){function e(a){return 1==a.nodeType&&!domUtils.isBookmarkNode(a)&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName]}for(var c,b=this,d=b.collapsed;1==b.startContainer.nodeType&&(c=b.startContainer.childNodes[b.startOffset])&&e(c);)b.setStart(c,0);if(d)return b.collapse(!0);if(!a)for(;1==b.endContainer.nodeType&&b.endOffset>0&&(c=b.endContainer.childNodes[b.endOffset-1])&&e(c);)b.setEnd(c,c.childNodes.length);return b},getCommonAncestor:function(a,b){var c=this,d=c.startContainer,f=c.endContainer;return d===f?a&&e(this)&&(d=d.childNodes[c.startOffset],1==d.nodeType)?d:b&&3==d.nodeType?d.parentNode:d:domUtils.getCommonAncestor(d,f)},trimBoundary:function(a){var b,c,d,e,f;return this.txtToElmBoundary(),b=this.startContainer,c=this.startOffset,d=this.collapsed,e=this.endContainer,3==b.nodeType&&(0==c?this.setStartBefore(b):c>=b.nodeValue.length?this.setStartAfter(b):(f=domUtils.split(b,c),b===e?this.setEnd(f,this.endOffset-c):b.parentNode===e&&(this.endOffset+=1),this.setStartBefore(f)),d)?this.collapse(!0):(a||(c=this.endOffset,e=this.endContainer,3==e.nodeType&&(0==c?this.setEndBefore(e):(c<e.nodeValue.length&&domUtils.split(e,c),this.setEndAfter(e)))),this)},txtToElmBoundary:function(a){function b(a,b){var c=a[b+"Container"],d=a[b+"Offset"];3==c.nodeType&&(d?d>=c.nodeValue.length&&a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](c):a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](c))}return(a||!this.collapsed)&&(b(this,"start"),b(this,"end")),this},insertNode:function(a){var d,e,f,b=a,c=1;return 11==a.nodeType&&(b=a.firstChild,c=a.childNodes.length),this.trimBoundary(!0),d=this.startContainer,e=this.startOffset,f=d.childNodes[e],f?d.insertBefore(a,f):d.appendChild(a),b.parentNode===this.endContainer&&(this.endOffset=this.endOffset+c),this.setStartBefore(b)},setCursor:function(a,b){return this.collapse(!a).select(b)},createBookmark:function(b,c){var d,e=this.document.createElement("span");return e.style.cssText="display:none;line-height:0px;",e.appendChild(this.document.createTextNode("‍")),e.id="_baidu_bookmark_start_"+(c?"":a++),this.collapsed||(d=e.cloneNode(!0),d.id="_baidu_bookmark_end_"+(c?"":a++)),this.insertNode(e),d&&this.collapse().insertNode(d).setEndBefore(d),this.setStartAfter(e),{start:b?e.id:e,end:d?b?d.id:d:null,id:b}},moveToBookmark:function(a){var b=a.id?this.document.getElementById(a.start):a.start,c=a.end&&a.id?this.document.getElementById(a.end):a.end;return this.setStartBefore(b),domUtils.remove(b),c?(this.setEndBefore(c),domUtils.remove(c)):this.collapse(!0),this},enlarge:function(a,b){var d,e,c=domUtils.isBody,f=this.document.createTextNode("");if(a){for(e=this.startContainer,1==e.nodeType?e.childNodes[this.startOffset]?d=e=e.childNodes[this.startOffset]:(e.appendChild(f),d=e=f):d=e;;){if(domUtils.isBlockElm(e)){for(e=d;(d=e.previousSibling)&&!domUtils.isBlockElm(d);)e=d;this.setStartBefore(e);break}d=e,e=e.parentNode}for(e=this.endContainer,1==e.nodeType?((d=e.childNodes[this.endOffset])?e.insertBefore(f,d):e.appendChild(f),d=e=f):d=e;;){if(domUtils.isBlockElm(e)){for(e=d;(d=e.nextSibling)&&!domUtils.isBlockElm(d);)e=d;this.setEndAfter(e);break}d=e,e=e.parentNode}f.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(f)}if(!this.collapsed){for(;!(0!=this.startOffset||b&&b(this.startContainer)||c(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||b&&b(this.endContainer)||c(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(a){for(;!domUtils.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!a)for(;!domUtils.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(a,b,c){var h,i,d,e,f,g,j,l,k,m,n,p,o,q;if(this.collapsed)return this;for(this.trimBoundary().enlarge(!1,function(a){return 1==a.nodeType&&domUtils.isBlockElm(a)}).adjustmentBoundary(),d=this.createBookmark(),e=d.end,f=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase():!domUtils.isWhitespace(a)},g=domUtils.getNextDomNode(d.start,!1,f),j=this.cloneRange();g&&domUtils.getPosition(g,e)&domUtils.POSITION_PRECEDING;)if(3==g.nodeType||dtd[a][g.tagName]){for(j.setStartBefore(g),h=g;h&&(3==h.nodeType||dtd[a][h.tagName])&&h!==e;)i=h,h=domUtils.getNextDomNode(h,1==h.nodeType,null,function(b){return dtd[a][b.tagName]});if(k=j.setEndAfter(i).extractContents(),c&&c.length>0){for(n=m=c[0].cloneNode(!1),o=1;p=c[o++];)m.appendChild(p.cloneNode(!1)),m=m.firstChild;l=m}else l=j.document.createElement(a);if(b&&domUtils.setAttributes(l,b),l.appendChild(k),j.insertNode(c?n:l),"span"==a&&b.style&&/text\-decoration/.test(b.style)&&(q=domUtils.findParentByTagName(l,"a",!0))?(domUtils.setAttributes(q,b),domUtils.remove(l,!0),l=q):(domUtils.mergeSibling(l),domUtils.clearEmptySibling(l)),domUtils.mergeChild(l,b),g=domUtils.getNextDomNode(l,!1,f),domUtils.mergeToParent(l),h===e)break}else g=domUtils.getNextDomNode(g,!0,f);return this.moveToBookmark(d)},removeInlineStyle:function(a){var b,c,e,f,d,h,g;if(this.collapsed)return this;for(a=utils.isArray(a)?a:[a],this.shrinkBoundary().adjustmentBoundary(),b=this.startContainer,c=this.endContainer;;){if(1==b.nodeType){if(utils.indexOf(a,b.tagName.toLowerCase())>-1)break;if("body"==b.tagName.toLowerCase()){b=null;break}}b=b.parentNode}for(;;){if(1==c.nodeType){if(utils.indexOf(a,c.tagName.toLowerCase())>-1)break;if("body"==c.tagName.toLowerCase()){c=null;break}}c=c.parentNode}for(d=this.createBookmark(),b&&(f=this.cloneRange().setEndBefore(d.start).setStartBefore(b),e=f.extractContents(),f.insertNode(e),domUtils.clearEmptySibling(b,!0),b.parentNode.insertBefore(d.start,b)),c&&(f=this.cloneRange().setStartAfter(d.end).setEndAfter(c),e=f.extractContents(),f.insertNode(e),domUtils.clearEmptySibling(c,!1,!0),c.parentNode.insertBefore(d.end,c.nextSibling)),g=domUtils.getNextDomNode(d.start,!1,function(a){return 1==a.nodeType});g&&g!==d.end;)h=domUtils.getNextDomNode(g,!0,function(a){return 1==a.nodeType}),utils.indexOf(a,g.tagName.toLowerCase())>-1&&domUtils.remove(g,!0),g=h;return this.moveToBookmark(d)},getClosedNode:function(){var a,b,c;return this.collapsed||(b=this.cloneRange().adjustmentBoundary().shrinkBoundary(),e(b)&&(c=b.startContainer.childNodes[b.startOffset],c&&1==c.nodeType&&(dtd.$empty[c.tagName]||dtd.$nonChild[c.tagName])&&(a=c))),a},select:browser.ie?function(a,d){var e,f,l,h,k,m,n,o;if(this.collapsed||this.shrinkBoundary(),f=this.getClosedNode(),f&&!d){try{e=this.document.body.createControlRange(),e.addElement(f),e.select()}catch(g){}return this}h=this.createBookmark(),k=h.start,e=this.document.body.createTextRange(),e.moveToElementText(k),e.moveStart("character",1),this.collapsed?a||3==this.startContainer.nodeType||(n=this.document.createTextNode(b),o=this.document.createElement("span"),o.appendChild(this.document.createTextNode(b)),k.parentNode.insertBefore(o,k),k.parentNode.insertBefore(n,k),i(this.document,n),c=n,j(o,"previousSibling"),j(k,"nextSibling"),e.moveStart("character",-1),e.collapse(!0)):(m=this.document.body.createTextRange(),l=h.end,m.moveToElementText(l),e.setEndPoint("EndToEnd",m)),this.moveToBookmark(h),o&&domUtils.remove(o);try{e.select()}catch(g){}return this}:function(a){function d(a){function b(b,c,d){3==b.nodeType&&b.nodeValue.length<c&&(a[d+"Offset"]=b.nodeValue.length)}b(a.startContainer,a.startOffset,"start"),b(a.endContainer,a.endOffset,"end")}var g,h,k,l,e=domUtils.getWindow(this.document),f=e.getSelection();if(browser.gecko?this.document.body.focus():e.focus(),f){if(f.removeAllRanges(),this.collapsed&&!a&&(h=this.startContainer,k=h,1==h.nodeType&&(k=h.childNodes[this.startOffset]),3==h.nodeType&&this.startOffset||(k?k.previousSibling&&3==k.previousSibling.nodeType:h.lastChild&&3==h.lastChild.nodeType)||(g=this.document.createTextNode(b),this.insertNode(g),i(this.document,g),j(g,"previousSibling"),j(g,"nextSibling"),c=g,this.setStart(g,browser.webkit?1:0).collapse(!0))),l=this.document.createRange(),this.collapsed&&browser.opera&&1==this.startContainer.nodeType)if(k=this.startContainer.childNodes[this.startOffset]){for(;k&&domUtils.isBlockElm(k)&&1==k.nodeType&&k.childNodes[0];)k=k.childNodes[0];k&&this.setStartBefore(k).collapse(!0)}else k=this.startContainer.lastChild,k&&domUtils.isBr(k)&&this.setStartBefore(k).collapse(!0);d(this),l.setStart(this.startContainer,this.startOffset),l.setEnd(this.endContainer,this.endOffset),f.addRange(l)}return this},scrollToView:function(a,b){a=a?window:domUtils.getWindow(this.document);var c=this,d=c.document.createElement("span");return d.innerHTML="&nbsp;",c.cloneRange().insertNode(d),domUtils.scrollToView(d,a,b),domUtils.remove(d),c},inFillChar:function(){var a=this.startContainer;return this.collapsed&&3==a.nodeType&&a.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1==a.nodeValue.length?!0:!1},createAddress:function(a,b){function e(a){var h,g,i,j,k,c=a?d.startContainer:d.endContainer,e=domUtils.findParents(c,!0,function(a){return!domUtils.isBody(a)}),f=[];for(g=0;h=e[g++];)f.push(domUtils.getNodeIndex(h,b));if(i=0,b)if(3==c.nodeType){for(j=c.previousSibling;j&&3==j.nodeType;)i+=j.nodeValue.replace(fillCharReg,"").length,j=j.previousSibling;i+=a?d.startOffset:d.endOffset}else if(c=c.childNodes[a?d.startOffset:d.endOffset])i=domUtils.getNodeIndex(c,b);else for(c=a?d.startContainer:d.endContainer,k=c.firstChild;k;)if(domUtils.isFillChar(k))k=k.nextSibling;else if(i++,3==k.nodeType)for(;k&&3==k.nodeType;)k=k.nextSibling;else k=k.nextSibling;else i=a?domUtils.isFillChar(c)?0:d.startOffset:d.endOffset;return 0>i&&(i=0),f.push(i),f}var c={},d=this;return c.startAddress=e(!0),a||(c.endAddress=d.collapsed?[].concat(c.startAddress):e()),c},moveToAddress:function(a,b){function d(a,b){var e,f,h,g,i,d=c.document.body;for(g=0,i=a.length;i>g;g++)if(h=a[g],e=d,d=d.childNodes[h],!d){f=h;break}b?d?c.setStartBefore(d):c.setStart(e,f):d?c.setEndBefore(d):c.setEnd(e,f)}var c=this;return d(a.startAddress,!0),!b&&a.endAddress&&d(a.endAddress),c},equals:function(a){for(var b in this)if(this.hasOwnProperty(b)&&this[b]!==a[b])return!1;return!0},traversal:function(a,b){var c,d,e,f;if(this.collapsed)return this;for(c=this.createBookmark(),d=c.end,e=domUtils.getNextDomNode(c.start,!1,b);e&&e!==d&&domUtils.getPosition(e,d)&domUtils.POSITION_PRECEDING;)f=domUtils.getNextDomNode(e,!1,b),a(e),e=f;return this.moveToBookmark(c)}}}(),function(){function a(a,b){var d,f,k,e,g,h,i,j,l,m,n,c=domUtils.getNodeIndex;if(a=a.duplicate(),a.collapse(b),d=a.parentElement(),!d.hasChildNodes())return{container:d,offset:0};for(e=d.children,g=a.duplicate(),h=0,i=e.length-1,j=-1;i>=h;)if(j=Math.floor((h+i)/2),f=e[j],g.moveToElementText(f),l=g.compareEndPoints("StartToStart",a),l>0)i=j-1;else{if(!(0>l))return{container:d,offset:c(f)};h=j+1}if(-1==j){if(g.moveToElementText(d),g.setEndPoint("StartToStart",a),k=g.text.replace(/(\r\n|\r)/g,"\n").length,e=d.childNodes,!k)return f=e[e.length-1],{container:f,offset:f.nodeValue.length};for(m=e.length;k>0;)k-=e[--m].nodeValue.length;return{container:e[m],offset:-k}}if(g.collapse(l>0),g.setEndPoint(l>0?"StartToStart":"EndToStart",a),k=g.text.replace(/(\r\n|\r)/g,"\n").length,!k)return dtd.$empty[f.tagName]||dtd.$nonChild[f.tagName]?{container:d,offset:c(f)+(l>0?0:1)}:{container:f,offset:l>0?0:f.childNodes.length};for(;k>0;)try{n=f,f=f[l>0?"previousSibling":"nextSibling"],k-=f.nodeValue.length}catch(o){return{container:d,offset:c(n)}}return{container:f,offset:l>0?-k:f.nodeValue.length+k}}function b(b,c){if(b.item)c.selectNode(b.item(0));else{var d=a(b,!0);c.setStart(d.container,d.offset),0!=b.compareEndPoints("StartToEnd",b)&&(d=a(b,!1),c.setEnd(d.container,d.offset))}return c}function c(a){var b,d;try{b=a.getNative().createRange()}catch(c){return null}return d=b.item?b.item(0):b.parentElement(),(d.ownerDocument||d)===a.document?b:null}var d=dom.Selection=function(a){var d,b=this;b.document=a,browser.ie9below&&(d=domUtils.getWindow(a).frameElement,domUtils.on(d,"beforedeactivate",function(){b._bakIERange=b.getIERange()}),domUtils.on(d,"activate",function(){try{!c(b)&&b._bakIERange&&b._bakIERange.select()}catch(a){}b._bakIERange=null})),d=a=null};d.prototype={rangeInBody:function(a,b){var c=browser.ie9below||b?a.item?a.item():a.parentElement():a.startContainer;return c===this.document.body||domUtils.inDoc(c,this.document)},getNative:function(){var a=this.document;try{return a?browser.ie9below?a.selection:domUtils.getWindow(a).getSelection():null}catch(b){return null}},getIERange:function(){var a=c(this);return!a&&this._bakIERange?this._bakIERange:a},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var a=this.getStart();return a?domUtils.findParents(a,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var a=c(this);return!(!a||!this.rangeInBody(a))}return!!this.getNative().rangeCount}catch(b){return!1}},getRange:function(){function c(b){for(var c=a.document.body.firstChild,d=b.collapsed;c&&c.firstChild;)b.setStart(c,0),c=c.firstChild;b.startContainer||b.setStart(a.document.body,0),d&&b.collapse(!0)}var d,e,g,h,i,a=this;if(null!=a._cachedRange)return this._cachedRange;if(d=new baidu.editor.dom.Range(a.document),browser.ie9below)if(e=a.getIERange())try{b(e,d)}catch(f){c(d)}else c(d);else if(g=a.getNative(),g&&g.rangeCount)h=g.getRangeAt(0),i=g.getRangeAt(g.rangeCount-1),d.setStart(h.startContainer,h.startOffset).setEnd(i.endContainer,i.endOffset),d.collapsed&&domUtils.isBody(d.startContainer)&&!d.startOffset&&c(d);else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;c(d)}return this._bakRange=d},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var b,c,d,e,a=browser.ie9below?this.getIERange():this.getRange();if(browser.ie9below){if(!a)return this.document.body.firstChild;if(a.item)return a.item(0);for(b=a.duplicate(),b.text.length>0&&b.moveStart("character",1),b.collapse(1),c=b.parentElement(),e=d=a.parentElement();d=d.parentNode;)if(d==c){c=e;break}}else if(a.shrinkBoundary(),c=a.startContainer,1==c.nodeType&&c.hasChildNodes()&&(c=c.childNodes[Math.min(c.childNodes.length-1,a.startOffset)]),3==c.nodeType)return c.parentNode;return c},getText:function(){var a,b;return this.isFocus()&&(a=this.getNative())?(b=browser.ie9below?a.createRange():a.getRangeAt(0),browser.ie9below?b.text:b.toString()):""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function c(a,b){var c,e,d,f;if(b.textarea)if(utils.isString(b.textarea)){for(d=0,f=domUtils.getElementsByTagName(a,"textarea");e=f[d++];)if(e.id=="ueditor_textarea_"+b.options.textarea){c=e;break}}else c=b.textarea;c||(a.appendChild(c=domUtils.createElement(document,"textarea",{name:b.options.textarea,id:"ueditor_textarea_"+b.options.textarea,style:"display:none"})),b.textarea=c),!c.getAttribute("name")&&c.setAttribute("name",b.options.textarea),c.value=b.hasContents()?b.options.allHtmlEnabled?b.getAllHtml():b.getContent(null,null,!0):""}function e(a){for(var b in a)return b}function f(a){a.langIsReady=!0,a.fireEvent("langReady")}var b,a=0,g=UE.Editor=function(b){var c=this;c.uid=a++,EventBase.call(c),c.commands={},c.options=utils.extend(utils.clone(b||{}),UEDITOR_CONFIG,!0),c.shortcutkeys={},c.inputRules=[],c.outputRules=[],c.setOpt(g.defaultOptions(c)),c.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:c.options.langPath+c.options.lang+"/"+c.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(c),f(c)}):(c.options.lang=e(UE.I18N),UE.plugin.load(c),f(c)),UE.instants["ueditorInstant"+c.uid]=c};g.prototype={registerCommand:function(a,b){this.commands[a]=b},ready:function(a){var b=this;a&&(b.isReady?a.apply(b):b.addListener("ready",a))},setOpt:function(a,b){var c={};utils.isString(a)?c[a]=b:c=a,utils.extend(this.options,c,!0)},getOpt:function(a){return this.options[a]},destroy:function(){var b,c,d,e,a=this;a.fireEvent("destroy"),b=a.container.parentNode,c=a.textarea,c?c.style.display="":(c=document.createElement("textarea"),b.parentNode.insertBefore(c,b)),c.style.width=a.iframe.offsetWidth+"px",c.style.height=a.iframe.offsetHeight+"px",c.value=a.getContent(),c.id=a.key,b.innerHTML="",domUtils.remove(b),d=a.key;for(e in a)a.hasOwnProperty(e)&&delete this[e];UE.delEditor(d)},render:function(a){var e,b=this,c=b.options,d=function(b){return parseInt(domUtils.getComputedStyle(a,b))};utils.isString(a)&&(a=document.getElementById(a)),a&&(c.minFrameWidth=c.initialFrameWidth?c.initialFrameWidth:c.initialFrameWidth=a.offsetWidth,c.initialFrameHeight?c.minFrameHeight=c.initialFrameHeight:c.initialFrameHeight=c.minFrameHeight=a.offsetHeight,a.style.width=/%$/.test(c.initialFrameWidth)?"100%":c.initialFrameWidth-d("padding-left")-d("padding-right")+"px",a.style.height=/%$/.test(c.initialFrameHeight)?"100%":c.initialFrameHeight-d("padding-top")-d("padding-bottom")+"px",a.style.zIndex=c.zIndex,e=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head>"+"<style type='text/css'>"+".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n"+"body{margin:8px;font-family:sans-serif;font-size:16px;}"+"p{margin:5px 0;}</style>"+(c.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(c.iframeCssUrl)+"'/>":"")+(c.initialStyle?"<style>"+c.initialStyle+"</style>":"")+"</head><body class='view' ></body>"+"<script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>"+"setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+b.uid+"'];editor._setup(document);},0);"+"var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>",a.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+b.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(c.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+e+'");document.close();}())'})),a.style.overflow="hidden",setTimeout(function(){/%$/.test(c.initialFrameWidth)&&(c.minFrameWidth=c.initialFrameWidth=a.offsetWidth),/%$/.test(c.initialFrameHeight)&&(c.minFrameHeight=c.initialFrameHeight=a.offsetHeight,a.style.height=c.initialFrameHeight+"px")}))},_setup:function(a){var e,f,g,b=this,d=b.options;for(ie?(a.body.disabled=!0,a.body.contentEditable=!0,a.body.disabled=!1):a.body.contentEditable=!0,a.body.spellcheck=!1,b.document=a,b.window=a.defaultView||a.parentWindow,b.iframe=b.window.frameElement,b.body=a.body,b.selection=new dom.Selection(a),browser.gecko&&(e=this.selection.getNative())&&e.removeAllRanges(),this._initEvents(),f=this.iframe.parentNode;!domUtils.isBody(f);f=f.parentNode)if("FORM"==f.tagName){b.form=f,b.options.autoSyncData?domUtils.on(b.window,"blur",function(){c(f,b)}):domUtils.on(f,"submit",function(){c(this,b)});break}d.initialContent&&(d.autoClearinitialContent?(g=b.execCommand,b.execCommand=function(){return b.fireEvent("firstBeforeExecCommand"),g.apply(b,arguments)},this._setDefaultContent(d.initialContent)):this.setContent(d.initialContent,!1,!0)),domUtils.isEmptyNode(b.body)&&(b.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),d.focus&&setTimeout(function(){b.focus(b.options.focusInEnd),!b.options.autoClearinitialContent&&b._selectionChange()},0),b.container||(b.container=this.iframe.parentNode),d.fullscreen&&b.ui&&b.ui.setFullScreen(!0);try{b.document.execCommand("2D-position",!1,!1)}catch(h){}try{b.document.execCommand("enableInlineTableEditing",!1,!1)}catch(h){}try{b.document.execCommand("enableObjectResizing",!1,!1)}catch(h){}b._bindshortcutKeys(),b.isReady=1,b.fireEvent("ready"),d.onready&&d.onready.call(b),browser.ie9below||domUtils.on(b.window,["blur","focus"],function(a){if("blur"==a.type){b._bakRange=b.selection.getRange();try{b._bakNativeRange=b.selection.getNative().getRangeAt(0),b.selection.getNative().removeAllRanges()}catch(a){b._bakNativeRange=null}}else try{b._bakRange&&b._bakRange.select()}catch(a){}}),browser.gecko&&browser.version<=10902&&(b.body.contentEditable=!1,setTimeout(function(){b.body.contentEditable=!0},100),setInterval(function(){b.body.style.height=b.iframe.offsetHeight-20+"px"},100)),!d.isShow&&b.setHide(),d.readonly&&b.setDisabled()},sync:function(a){var b=this,d=a?document.getElementById(a):domUtils.findParent(b.iframe.parentNode,function(a){return"FORM"==a.tagName},!0);d&&c(d,b)},setHeight:function(a,b){a!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=a+"px"),!b&&(this.options.minFrameHeight=this.options.initialFrameHeight=a),this.body.style.height=a+"px",!b&&this.trigger("setHeight")},addshortcutkey:function(a,b){var c={};b?c[a]=b:c=a,utils.extend(this.shortcutkeys,c)},_bindshortcutKeys:function(){var a=this,b=this.shortcutkeys;a.addListener("keydown",function(c,d){var f,g,i,h,j,k,e=d.keyCode||d.which;for(f in b)for(g=b[f].split(","),h=0;i=g[h++];)i=i.split(":"),j=i[0],k=i[1],(/^(ctrl)(\+shift)?\+(\d+)$/.test(j.toLowerCase())||/^(\d+)$/.test(j))&&(("ctrl"==RegExp.$1?d.ctrlKey||d.metaKey:0)&&(""!=RegExp.$2?d[RegExp.$2.slice(1)+"Key"]:1)&&e==RegExp.$3||e==RegExp.$1)&&(-1!=a.queryCommandState(f,k)&&a.execCommand(f,k),domUtils.preventDefault(d))})},getContent:function(a,b,c,d,e){var g,f=this;return a&&utils.isFunction(a)&&(b=a,a=""),(b?b():this.hasContents())?(f.fireEvent("beforegetcontent"),g=UE.htmlparser(f.body.innerHTML,d),f.filterOutputRule(g),f.fireEvent("aftergetcontent",a,g),g.toHtml(e)):""},getAllHtml:function(){var d,a=this,b=[];return a.fireEvent("getAllHtml",b),browser.ie&&browser.version>8&&(d="",utils.each(a.document.styleSheets,function(a){d+=a.href?'<link rel="stylesheet" type="text/css" href="'+a.href+'" />':"<style>"+a.cssText+"</style>"}),utils.each(a.document.getElementsByTagName("script"),function(a){d+=a.outerHTML})),"<html><head>"+(a.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+a.options.charset+'"/>':"")+(d||a.document.getElementsByTagName("head")[0].innerHTML)+b.join("\n")+"</head>"+"<body "+(ie&&browser.version<9?'class="view"':"")+">"+a.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var a=new RegExp(domUtils.fillChar,"g"),b=this.body.innerHTML.replace(/[\n\r]/g,"");return b=b.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>\/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(a,b,c){return dtd.$block[c]?"\n":b?b:""}),b.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var a=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(a,"").replace(/\u00a0/g," ")},setContent:function(a,b,d){function g(a){return"DIV"==a.tagName&&a.getAttribute("cdata_tag")}var f,i,h,j,k,e=this;if(e.fireEvent("beforesetcontent",a),f=UE.htmlparser(a),e.filterInputRule(f),a=f.toHtml(),e.body.innerHTML=(b?e.body.innerHTML:"")+a,"p"==e.options.enterTag)if(h=this.body.firstChild,!h||1==h.nodeType&&(dtd.$cdata[h.tagName]||g(h)||domUtils.isCustomeNode(h))&&h===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(j=e.document.createElement("p");h;){for(;h&&(3==h.nodeType||1==h.nodeType&&dtd.p[h.tagName]&&!dtd.$cdata[h.tagName]);)i=h.nextSibling,j.appendChild(h),h=i;if(j.firstChild){if(!h){e.body.appendChild(j);break}h.parentNode.insertBefore(j,h),j=e.document.createElement("p")}h=h.nextSibling}e.fireEvent("aftersetcontent"),e.fireEvent("contentchange"),!d&&e._selectionChange(),e._bakRange=e._bakIERange=e._bakNativeRange=null,browser.gecko&&(k=this.selection.getNative())&&k.removeAllRanges(),e.options.autoSyncData&&e.form&&c(e.form,e)},focus:function(a){var b,c,d;try{b=this,c=b.selection.getRange(),a?(d=b.body.lastChild,d&&1==d.nodeType&&!dtd.$empty[d.tagName]&&(domUtils.isEmptyBlock(d)?c.setStartAtFirst(d):c.setStartAtLast(d),c.collapse(!0)),c.setCursor(!0)):(!c.collapsed&&domUtils.isBody(c.startContainer)&&0==c.startOffset&&(d=b.body.firstChild,d&&1==d.nodeType&&!dtd.$empty[d.tagName]&&c.setStartAtFirst(d).collapse(!0)),c.select(!0)),this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var b,a=this.selection.getNative();a.empty&&browser.ie?(b=document.body.createTextRange(),b.moveToElementText(document.body),b.collapse(!0),b.select(),a.empty()):a.removeAllRanges()},_initEvents:function(){var a=this,b=a.document,c=a.window;a._proxyDomEvent=utils.bind(a._proxyDomEvent,a),domUtils.on(b,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],a._proxyDomEvent),domUtils.on(c,["focus","blur"],a._proxyDomEvent),domUtils.on(a.body,"drop",function(b){browser.gecko&&b.stopPropagation&&b.stopPropagation(),a.fireEvent("contentchange")}),domUtils.on(b,["mouseup","keydown"],function(b){"keydown"==b.type&&(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)||2!=b.button&&a._selectionChange(250,b)})},_proxyDomEvent:function(a){return this.fireEvent("before"+a.type.replace(/^on/,"").toLowerCase())===!1?!1:this.fireEvent(a.type.replace(/^on/,""),a)===!1?!1:this.fireEvent("after"+a.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(a,c){var f,g,h,d=this,e=!1;browser.ie&&browser.version<9&&c&&"mouseup"==c.type&&(h=this.selection.getRange(),h.collapsed||(e=!0,f=c.clientX,g=c.clientY)),clearTimeout(b),b=setTimeout(function(){var a,h;if(d.selection&&d.selection.getNative()){if(e&&"None"==d.selection.getNative().type){a=d.document.body.createTextRange();try{a.moveToPoint(f,g)}catch(b){a=null}}a&&(h=d.selection.getIERange,d.selection.getIERange=function(){return a}),d.selection.cache(),h&&(d.selection.getIERange=h),d.selection._cachedRange&&d.selection._cachedStartElement&&(d.fireEvent("beforeselectionchange"),d.fireEvent("selectionchange",!!c),d.fireEvent("afterselectionchange"),d.selection.clear())}},a||50)},_callCmdFn:function(a,b){var d,e,c=b[0].toLowerCase();return d=this.commands[c]||UE.commands[c],e=d&&d[a],d&&e||"queryCommandState"!=a?e?e.apply(this,b):void 0:0},execCommand:function(a){a=a.toLowerCase();var c,b=this,d=b.commands[a]||UE.commands[a];return d&&d.execCommand?(d.notNeedUndo||b.__hasEnterExecCommand?(c=this._callCmdFn("execCommand",arguments),!b.__hasEnterExecCommand&&!d.ignoreContentChange&&!b._ignoreContentChange&&b.fireEvent("contentchange")):(b.__hasEnterExecCommand=!0,-1!=b.queryCommandState.apply(b,arguments)&&(b.fireEvent("saveScene"),b.fireEvent.apply(b,["beforeexeccommand",a].concat(arguments)),c=this._callCmdFn("execCommand",arguments),b.fireEvent.apply(b,["afterexeccommand",a].concat(arguments)),b.fireEvent("saveScene")),b.__hasEnterExecCommand=!1),!b.__hasEnterExecCommand&&!d.ignoreContentChange&&!b._ignoreContentChange&&b._selectionChange(),c):null},queryCommandState:function(){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(a){var c,b,d,f,e;if(a)for(b=0;c=a[b++];)if(this.document.getElementsByTagName(c).length>0)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;for(a=["div"],b=0;c=a[b++];)for(d=domUtils.getElementsByTagName(this.document,c),e=0;f=d[e++];)if(domUtils.isCustomeNode(f))return!0;return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var b,a=this;if("false"==a.body.contentEditable){a.body.contentEditable=!0,b=a.selection.getRange();try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}b.select(!0),a.bkqueryCommandState&&(a.queryCommandState=a.bkqueryCommandState,delete a.bkqueryCommandState),a.bkqueryCommandValue&&(a.queryCommandValue=a.bkqueryCommandValue,delete a.bkqueryCommandValue),a.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(a){var b=this;a=a?utils.isArray(a)?a:[a]:[],"true"==b.body.contentEditable&&(b.lastBk||(b.lastBk=b.selection.getRange().createBookmark(!0)),b.body.contentEditable=!1,b.bkqueryCommandState=b.queryCommandState,b.bkqueryCommandValue=b.queryCommandValue,b.queryCommandState=function(c){return-1!=utils.indexOf(a,c)?b.bkqueryCommandState.apply(b,arguments):-1},b.queryCommandValue=function(c){return-1!=utils.indexOf(a,c)?b.bkqueryCommandValue.apply(b,arguments):null},b.fireEvent("selectionchange"))},disable:function(a){return this.setDisabled(a)},_setDefaultContent:function(){function a(){var b=this;b.document.getElementById("initContent")&&(b.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",b.removeListener("firstBeforeExecCommand focus",a),setTimeout(function(){b.focus(),b._selectionChange()},0))}return function(b){var c=this;c.body.innerHTML='<p id="initContent">'+b+"</p>",c.addListener("firstBeforeExecCommand focus",a)}}(),setShow:function(){var a=this,b=a.selection.getRange();if("none"==a.container.style.display){try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}setTimeout(function(){b.select(!0)},100),a.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var a=this;a.lastBk||(a.lastBk=a.selection.getRange().createBookmark(!0)),a.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(a){var d,c,b=UE.I18N[this.options.lang];
if(!b)throw Error("not import language file");for(a=(a||"").split("."),c=0;(d=a[c++])&&(b=b[d],b););return b},getContentLength:function(a,b){var e,d,c=this.getContent(!1,!1,!0).length;if(a)for(b=(b||[]).concat(["hr","img","iframe"]),c=this.getContentTxt().replace(/[\t\r\n]+/g,"").length,d=0;e=b[d++];)c+=this.document.getElementsByTagName(e).length;return c},addInputRule:function(a){this.inputRules.push(a)},filterInputRule:function(a){for(var c,b=0;c=this.inputRules[b++];)c.call(this,a)},addOutputRule:function(a){this.outputRules.push(a)},filterOutputRule:function(a){for(var c,b=0;c=this.outputRules[b++];)c.call(this,a)},getActionUrl:function(a){var b=this.getOpt(a)||a,c=this.getOpt("imageUrl"),d=this.getOpt("serverUrl");return!d&&c&&(d=c.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),d?(d=d+(-1==d.indexOf("?")?"?":"&")+"action="+(b||""),utils.formatUrl(d)):""}},utils.inherits(g,EventBase)}(),UE.Editor.defaultOptions=function(a){var b=a.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:b+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:b+"lang/",theme:"default",themePath:b+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(a){console&&console.error(a)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");if(0==config.code)return alert("ueditor config:"+config.state);utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){var a=this;return a._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(a){var b,c;a&&utils.isFunction(a)&&(b=this,c=function(){a.apply(b,arguments),b.removeListener("serverConfigLoaded",c)},b.isServerConfigLoaded()?a.call(b,"serverConfigLoaded"):b.addListener("serverConfigLoaded",c))}}(),UE.ajax=function(){function d(a){var c,d,b=[];for(c in a)if("method"!=c&&"timeout"!=c&&"async"!=c&&"dataType"!=c&&"callback"!=c&&void 0!=a[c]&&null!=a[c])if("function"!=(typeof a[c]).toLowerCase()&&"object"!=(typeof a[c]).toLowerCase())b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));else if(utils.isArray(a[c]))for(d=0;d<a[c].length;d++)b.push(encodeURIComponent(c)+"[]="+encodeURIComponent(a[c][d]));return b.join("&")}function e(a,b){var h,i,j,k,l,e=c(),f=!1,g={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};"object"==typeof a&&(b=a,a=b.url),e&&a&&(h=b?utils.extend(g,b):g,i=d(h),utils.isEmptyObject(h.data)||(i+=(i?"&":"")+d(h.data)),j=setTimeout(function(){4!=e.readyState&&(f=!0,e.abort(),clearTimeout(j))},h.timeout),k=h.method.toUpperCase(),l=a+(-1==a.indexOf("?")?"?":"&")+("POST"==k?"":i+"&noCache="+ +new Date),e.open(k,l,h.async),e.onreadystatechange=function(){4==e.readyState&&(f||200!=e.status?h.onerror(e):h.onsuccess(e))},"POST"==k?(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(i)):e.send(null))}function f(a,b){function o(a,b,c){a.setAttribute("type","text/javascript"),a.setAttribute("defer","defer"),c&&a.setAttribute("charset",c),a.setAttribute("src",b),document.getElementsByTagName("head")[0].appendChild(a)}function p(a){return function(){try{if(a)f.onerror&&f.onerror();else try{clearTimeout(k),c.apply(window,arguments)}catch(b){}}catch(d){f.onerror&&f.onerror.call(window,d)}finally{f.oncomplete&&f.oncomplete.apply(window,arguments),e.parentNode&&e.parentNode.removeChild(e),window[i]=null;try{delete window[i]}catch(b){}}}}var i,k,m,n,c=b.onsuccess||function(){},e=document.createElement("SCRIPT"),f=b||{},g=f["charset"],h=f["jsonp"]||"callback",j=f["timeOut"]||0,l=new RegExp("(\\?|&)"+h+"=([^&]*)");utils.isFunction(c)?(i="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[i]=p(0)):utils.isString(c)?i=c:(m=l.exec(a))&&(i=m[2]),a=a.replace(l,"$1"+h+"="+i),a.search(l)<0&&(a+=(a.indexOf("?")<0?"?":"&")+h+"="+i),n=d(b),utils.isEmptyObject(b.data)||(n+=(n?"&":"")+d(b.data)),n&&(a=a.replace(/\?/,"?"+n+"&")),e.onerror=p(1),j&&(k=setTimeout(p(1),j)),o(e,a,g)}var c,a="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),a="ActiveXObject('Msxml2.XMLHTTP')"}catch(b){try{new ActiveXObject("Microsoft.XMLHTTP"),a="ActiveXObject('Microsoft.XMLHTTP')"}catch(b){}}return c=new Function("return new "+a),{request:function(a,b){b&&"jsonp"==b.dataType?f(a,b):e(a,b)},getJSONP:function(a,b,c){var d={data:b,oncomplete:c};f(a,d)}}}(),filterWord=UE.filterWord=function(){function a(a){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(a)}function b(a){return a=a.replace(/[\d.]+\w+/g,function(a){return utils.transUnitToPx(a)})}function c(a){return a.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(a){if(browser.opera)return"";try{if(/Bitmap/i.test(a))return"";var c=a.match(/width:([ \d.]*p[tx])/i)[1],d=a.match(/height:([ \d.]*p[tx])/i)[1],e=a.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+b(c)+'" height="'+b(d)+'" src="'+e+'" />'}catch(f){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(a,b,c,d){return"class"==b&&"MsoListParagraph"==d?a:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(a,b,c){return c.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(a,c,d,e){var i,h,j,k,l,f=[],g=e.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(a){return utils.transUnitToPx(a)}).split(/;\s*/g);for(h=0;i=g[h];h++)if(l=i.split(":"),2==l.length){if(j=l[0].toLowerCase(),k=l[1].toLowerCase(),/^(background)\w*/.test(j)&&0==k.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(j)&&/^0\w+$/.test(k))continue;switch(j){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(c)||(f[h]=j.replace(/^mso-|-alt$/g,"")+":"+b(k));continue;case"horiz-align":f[h]="text-align:"+k;continue;case"vert-align":f[h]="vertical-align:"+k;continue;case"font-color":case"mso-foreground":f[h]="color:"+k;continue;case"mso-background":case"mso-highlight":f[h]="background:"+k;continue;case"mso-default-height":f[h]="min-height:"+b(k);continue;case"mso-default-width":f[h]="min-width:"+b(k);continue;case"mso-padding-between-alt":f[h]="border-collapse:separate;border-spacing:"+b(k);continue;case"text-line-through":("single"==k||"double"==k)&&(f[h]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==k&&(f[h]="display:none");continue;case"margin":if(!/[1-9]/.test(k))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(j)||/text\-indent|padding|margin/.test(j)&&/\-[\d.]+/.test(k))continue;f[h]=j+":"+l[1]}return c+(f.length?' style="'+f.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(b){return a(b)?c(b):b}}(),function(){function f(a,b,c){return a.push(e),b+(c?1:-1)}function g(a,b){for(var c=0;b>c;c++)a.push(d)}function h(a,b,c,d){switch(a.type){case"root":for(var l,e=0;l=a.children[e++];)c&&"element"==l.type&&!dtd.$inlineWithA[l.tagName]&&e>1&&(f(b,d,!0),g(b,d)),h(l,b,c,d);break;case"text":i(a,b);break;case"element":j(a,b,c,d);break;case"comment":k(a,b,c)}return b}function i(a,b){"pre"==a.parentNode.tagName?b.push(a.data):b.push(c[a.parentNode.tagName]?utils.html(a.data):a.data.replace(/[ ]{2}/g," &nbsp;"))}function j(a,c,d,e){var j,k,m,l,i="";if(a.attrs){i=[],j=a.attrs;for(k in j)i.push(k+(void 0!==j[k]?'="'+(b[k]?utils.html(j[k]).replace(/["]/g,function(){return"&quot;"}):utils.unhtml(j[k]))+'"':""));i=i.join(" ")}if(c.push("<"+a.tagName+(i?" "+i:"")+(dtd.$empty[a.tagName]?"/":"")+">"),d&&!dtd.$inlineWithA[a.tagName]&&"pre"!=a.tagName&&a.children&&a.children.length&&(e=f(c,e,!0),g(c,e)),a.children&&a.children.length)for(l=0;m=a.children[l++];)d&&"element"==m.type&&!dtd.$inlineWithA[m.tagName]&&l>1&&(f(c,e),g(c,e)),h(m,c,d,e);dtd.$empty[a.tagName]||(d&&!dtd.$inlineWithA[a.tagName]&&"pre"!=a.tagName&&a.children&&a.children.length&&(e=f(c,e),g(c,e)),c.push("</"+a.tagName+">"))}function k(a,b){b.push("<!--"+a.data+"-->")}function l(a,b){var c,e,d;if("element"==a.type&&a.getAttr("id")==b)return a;if(a.children&&a.children.length)for(d=0;e=a.children[d++];)if(c=l(e,b))return c}function m(a,b,c){if("element"==a.type&&a.tagName==b&&c.push(a),a.children&&a.children.length)for(var e,d=0;e=a.children[d++];)m(e,b,c)}function n(a,b){if(a.children&&a.children.length)for(var d,c=0;d=a.children[c];)n(d,b),d.parentNode&&(d.children&&d.children.length&&b(d),d.parentNode&&c++);else b(a)}var a=UE.uNode=function(a){this.type=a.type,this.data=a.data,this.tagName=a.tagName,this.parentNode=a.parentNode,this.attrs=a.attrs||{},this.children=a.children},b={href:1,src:1,_src:1,_href:1,cdata_data:1},c={style:1,script:1},d="    ",e="\n";a.createElement=function(b){return/[<>]/.test(b)?UE.htmlparser(b).children[0]:new a({type:"element",children:[],tagName:b})},a.createText=function(a,b){return new UE.uNode({type:"text",data:b?a:utils.unhtml(a||"")})},a.prototype={toHtml:function(a){var b=[];return h(this,b,a,0),b.join("")},innerHTML:function(a){var c,b,d;if("element"!=this.type||dtd.$empty[this.tagName])return this;if(utils.isString(a)){if(this.children)for(b=0;c=this.children[b++];)c.parentNode=null;for(this.children=[],d=UE.htmlparser(a),b=0;c=d.children[b++];)this.children.push(c),c.parentNode=this;return this}return d=new UE.uNode({type:"root",children:this.children}),d.toHtml()},innerText:function(b,c){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(b){if(this.children)for(var e,d=0;e=this.children[d++];)e.parentNode=null;return this.children=[],this.appendChild(a.createText(b,c)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var c,b,a=this.parentNode;for(b=0;c=a.children[b];b++)if(c===this)return 0==b?null:a.children[b-1]},nextSibling:function(){var c,b,a=this.parentNode;for(b=0;c=a.children[b++];)if(c===this)return a.children[b]},replaceChild:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var d,c=0;d=this.children[c];c++)if(d===b)return this.children.splice(c,1,a),b.parentNode=null,a.parentNode=this,a}},appendChild:function(a){if("root"==this.type||"element"==this.type&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),a.parentNode&&a.parentNode.removeChild(a);for(var c,b=0;c=this.children[b];b++)if(c===a){this.children.splice(b,1);break}return this.children.push(a),a.parentNode=this,a}},insertBefore:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var d,c=0;d=this.children[c];c++)if(d===b)return this.children.splice(c,0,a),a.parentNode=this,a}},insertAfter:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var d,c=0;d=this.children[c];c++)if(d===b)return this.children.splice(c+1,0,a),a.parentNode=this,a}},removeChild:function(a,b){var d,c,f,e;if(this.children)for(c=0;d=this.children[c];c++)if(d===a){if(this.children.splice(c,1),d.parentNode=null,b&&d.children&&d.children.length)for(e=0;f=d.children[e];e++)this.children.splice(c+e,0,f),f.parentNode=this;return d}},getAttr:function(a){return this.attrs&&this.attrs[a.toLowerCase()]},setAttr:function(a,b){if(!a)return delete this.attrs,void 0;if(this.attrs||(this.attrs={}),utils.isObject(a))for(var c in a)a[c]?this.attrs[c.toLowerCase()]=a[c]:delete this.attrs[c];else b?this.attrs[a.toLowerCase()]=b:delete this.attrs[a]},getIndex:function(){var c,b,a=this.parentNode;for(b=0;c=a.children[b];b++)if(c===this)return b;return-1},getNodeById:function(a){var b,d,c;if(this.children&&this.children.length)for(c=0;d=this.children[c++];)if(b=l(d,a))return b},getNodesByTagName:function(a){a=utils.trim(a).replace(/[ ]{2,}/g," ").split(" ");var b=[],c=this;return utils.each(a,function(a){if(c.children&&c.children.length)for(var e,d=0;e=c.children[d++];)m(e,a,b)}),b},getStyle:function(a){var c,d,b=this.getAttr("style");return b?(c=new RegExp("(^|;)\\s*"+a+":([^;]+)","i"),d=b.match(c),d&&d[0]?d[2]:""):""},setStyle:function(a,b){function c(a,b){var c=new RegExp("(^|;)\\s*"+a+":([^;]+;?)","gi");d=d.replace(c,"$1"),b&&(d=a+":"+utils.unhtml(b)+";"+d)}var e,d=this.getAttr("style");if(d||(d=""),utils.isObject(a))for(e in a)c(e,a[e]);else c(a,b);this.setAttr("style",utils.trim(d))},traversal:function(a){return this.children&&this.children.length&&n(this,a),this}}}(),htmlparser=UE.htmlparser=function(a,b){function j(a,b){if(i[a.tagName]){var c=g.createElement(i[a.tagName]);a.appendChild(c),c.appendChild(g.createText(b)),a=c}else a.appendChild(g.createText(b))}function k(a,b,c){var e,j,i,l,n,m;if(e=h[b]){for(i=a;"root"!=i.type;){if(utils.isArray(e)?-1!=utils.indexOf(e,i.tagName):e==i.tagName){a=i,j=!0;break}i=i.parentNode}j||(a=k(a,utils.isArray(e)?e[0]:e))}if(l=new g({parentNode:a,type:"element",tagName:b.toLowerCase(),children:dtd.$empty[b]?null:[]}),c){for(m={};n=d.exec(c);)m[n[1].toLowerCase()]=f[n[1].toLowerCase()]?n[2]||n[3]||n[4]:utils.unhtml(n[2]||n[3]||n[4]);l.attrs=m}return a.children.push(l),dtd.$empty[b]?a:l}function l(a,b){a.children.push(new g({type:"comment",data:b,parentNode:a}))}var f,g,h,i,m,n,o,p,q,r,c=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,d=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};for(a=a.replace(new RegExp(domUtils.fillChar,"g"),""),b||(a=a.replace(new RegExp("[\\r\\t\\n"+(b?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(b?"":" ")+"]*","g"),function(a,c){return c&&e[c.toLowerCase()]?a.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):a.replace(new RegExp("^[\\r\\n"+(b?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(b?"":" ")+"]+$"),"")})),f={href:1,src:1},g=UE.uNode,h={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},i={ol:"li",ul:"li"},n=0,o=0,p=new g({type:"root",children:[]}),q=p;m=c.exec(a);){n=m.index;try{if(n>o&&j(q,a.slice(o,n)),m[3])dtd.$cdata[q.tagName]?j(q,m[0]):q=k(q,m[3].toLowerCase(),m[4]);else if(m[1]){if("root"!=q.type)if(dtd.$cdata[q.tagName]&&!dtd.$cdata[m[1]])j(q,m[0]);else{for(r=q;"element"==q.type&&q.tagName!=m[1].toLowerCase();)if(q=q.parentNode,"root"==q.type)throw q=r,"break";q=q.parentNode}}else m[2]&&l(q,m[2])}catch(s){}o=c.lastIndex}return o<a.length&&j(q,a.slice(o)),p},filterNode=UE.filterNode=function(){function a(b,c){var d,e,f,h,g,i,k,j,l,m;switch(b.type){case"text":break;case"element":if(d=c[b.tagName])if("-"===d)b.parentNode.removeChild(b);else if(utils.isFunction(d))if(e=b.parentNode,f=b.getIndex(),d(b),b.parentNode){if(b.children)for(g=0;h=b.children[g];)a(h,c),h.parentNode&&g++}else for(g=f;h=e.children[g];)a(h,c),h.parentNode&&g++;else{if(i=d["$"],i&&b.attrs){j={};for(l in i)k=b.getAttr(l),"style"==l&&utils.isArray(i[l])&&(m=[],utils.each(i[l],function(a){var c;(c=b.getStyle(a))&&m.push(a+":"+c)}),k=m.join(";")),k&&(j[l]=k);b.attrs=j}if(b.children)for(g=0;h=b.children[g];)a(h,c),h.parentNode&&g++}else if(dtd.$cdata[b.tagName])b.parentNode.removeChild(b);else for(e=b.parentNode,f=b.getIndex(),b.parentNode.removeChild(b,!0),g=f;h=e.children[g];)a(h,c),h.parentNode&&g++;break;case"comment":b.parentNode.removeChild(b)}}return function(b,c){var d,f,e;if(utils.isEmptyObject(c))return b;for((d=c["-"])&&utils.each(d.split(" "),function(a){c[a]="-"}),e=0;f=b.children[e];)a(f,c),f.parentNode&&e++;return b}}(),UE.plugin=function(){var a={};return{register:function(b,c,d,e){d&&utils.isFunction(d)&&(e=d,d=null),a[b]={optionName:d||b,execFn:c,afterDisabled:e}},load:function(b){utils.each(a,function(a){var c=a.execFn.call(b);b.options[a.optionName]!==!1?c&&utils.each(c,function(a,c){switch(c.toLowerCase()){case"shortcutkey":b.addshortcutkey(a);break;case"bindevents":utils.each(a,function(a,c){b.addListener(c,a)});break;case"bindmultievents":utils.each(utils.isArray(a)?a:[a],function(a){var c=utils.trim(a.type).split(/\s+/);utils.each(c,function(c){b.addListener(c,a.handler)})});break;case"commands":utils.each(a,function(a,c){b.commands[c]=a});break;case"outputrule":b.addOutputRule(a);break;case"inputrule":b.addInputRule(a);break;case"defaultoptions":b.setOpt(a)}}):a.afterDisabled&&a.afterDisabled.call(b)}),utils.each(UE.plugins,function(a){a.call(b)})},run:function(b,c){var d=a[b];d&&d.exeFn.call(c)}}}(),keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=function(){function c(){var a=document.createElement("div");return a.style.display="none",a.addBehavior?(a.addBehavior("#default#userdata"),{getItem:function(c){var d=null;try{document.body.appendChild(a),a.load(b),d=a.getAttribute(c),document.body.removeChild(a)}catch(e){}return d},setItem:function(c,d){document.body.appendChild(a),a.setAttribute(c,d),a.save(b),document.body.removeChild(a)},removeItem:function(c){document.body.appendChild(a),a.removeAttribute(c),a.save(b),document.body.removeChild(a)}}):null}var a=window.localStorage||c()||null,b="localStorage";return{saveLocalData:function(b,c){return a&&c?(a.setItem(b,c),!0):!1},getLocalData:function(b){return a?a.getItem(b):null},removeItem:function(b){a&&a.removeItem(b)}}}(),function(){var a="ueditor_preference";UE.Editor.prototype.setPreferences=function(b,c){var e,d={};utils.isString(b)?d[b]=c:d=b,e=LocalStorage.getLocalData(a),e&&(e=utils.str2json(e))?utils.extend(e,d):e=d,e&&LocalStorage.saveLocalData(a,utils.json2str(e))},UE.Editor.prototype.getPreferences=function(b){var c=LocalStorage.getLocalData(a);return c&&(c=utils.str2json(c))?b?c[b]:c:null},UE.Editor.prototype.removePreferences=function(b){var c=LocalStorage.getLocalData(a);c&&(c=utils.str2json(c))&&(c[b]=void 0,delete c[b]),c&&LocalStorage.saveLocalData(a,utils.json2str(c))}}(),UE.plugins["defaultfilter"]=function(){var a=this;a.setOpt({allowDivTransToP:!1,disabledTableInTable:!0}),a.addInputRule(function(b){function e(a){for(;a&&"element"==a.type;){if("td"==a.tagName)return!0;a=a.parentNode}return!1}var d,c=this.options.allowDivTransToP;b.traversal(function(b){var f,g,h,i;if("element"==b.type){if(!dtd.$cdata[b.tagName]&&a.options.autoClearEmptyNode&&dtd.$inline[b.tagName]&&!dtd.$empty[b.tagName]&&(!b.attrs||utils.isEmptyObject(b.attrs)))return b.firstChild()?"span"!=b.tagName||b.attrs&&!utils.isEmptyObject(b.attrs)||b.parentNode.removeChild(b,!0):b.parentNode.removeChild(b),void 0;switch(b.tagName){case"style":case"script":b.setAttr({cdata_tag:b.tagName,cdata_data:b.innerHTML()||"",_ue_custom_node_:"true"}),b.tagName="div",b.innerHTML("");break;case"a":(d=b.getAttr("href"))&&b.setAttr("_href",d);break;case"img":if((d=b.getAttr("src"))&&/^data:/.test(d)){b.parentNode.removeChild(b);break}b.setAttr("_src",b.getAttr("src"));break;case"span":browser.webkit&&(d=b.getStyle("white-space"))&&/nowrap|normal/.test(d)&&(b.setStyle("white-space",""),a.options.autoClearEmptyNode&&utils.isEmptyObject(b.attrs)&&b.parentNode.removeChild(b,!0)),d=b.getAttr("id"),d&&/^_baidu_bookmark_/i.test(d)&&b.parentNode.removeChild(b);break;case"p":(d=b.getAttr("align"))&&(b.setAttr("align"),b.setStyle("text-align",d)),utils.each(b.children,function(a){var c,d,e;if("element"==a.type&&"p"==a.tagName){for(c=a.nextSibling(),b.parentNode.insertAfter(a,b),d=a;c;)e=c.nextSibling(),b.parentNode.insertAfter(c,d),d=c,c=e;return!1}}),b.firstChild()||b.innerHTML(browser.ie?"&nbsp;":"<br/>");break;case"div":if(b.getAttr("cdata_tag"))break;if(d=b.getAttr("class"),d&&/^line number\d+/.test(d))break;if(!c)break;for(g=UE.uNode.createElement("p");f=b.firstChild();)"text"!=f.type&&UE.dom.dtd.$block[f.tagName]?g.firstChild()?(b.parentNode.insertBefore(g,b),g=UE.uNode.createElement("p")):b.parentNode.insertBefore(f,b):g.appendChild(f);g.firstChild()&&b.parentNode.insertBefore(g,b),b.parentNode.removeChild(b);break;case"dl":b.tagName="ul";break;case"dt":case"dd":b.tagName="li";break;case"li":h=b.getAttr("class"),h&&/list\-/.test(h)||b.setAttr(),i=b.getNodesByTagName("ol ul"),UE.utils.each(i,function(a){b.parentNode.insertAfter(a,b)});break;case"td":case"th":case"caption":b.children&&b.children.length||b.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":a.options.disabledTableInTable&&e(b)&&(b.parentNode.insertBefore(UE.uNode.createText(b.innerText()),b),b.parentNode.removeChild(b))}}})}),a.addOutputRule(function(b){var c;b.traversal(function(b){if("element"==b.type){if(a.options.autoClearEmptyNode&&dtd.$inline[b.tagName]&&!dtd.$empty[b.tagName]&&(!b.attrs||utils.isEmptyObject(b.attrs)))return b.firstChild()?"span"!=b.tagName||b.attrs&&!utils.isEmptyObject(b.attrs)||b.parentNode.removeChild(b,!0):b.parentNode.removeChild(b),void 0;switch(b.tagName){case"div":(c=b.getAttr("cdata_tag"))&&(b.tagName=c,b.appendChild(UE.uNode.createText(b.getAttr("cdata_data"))),b.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(c=b.getAttr("_href"))&&b.setAttr({href:utils.html(c),_href:""});break;case"span":c=b.getAttr("id"),c&&/^_baidu_bookmark_/i.test(c)&&b.parentNode.removeChild(b);break;case"img":(c=b.getAttr("_src"))&&b.setAttr({src:b.getAttr("_src"),_src:""})}}})})},UE.commands["inserthtml"]={execCommand:function(a,b,c){var e,f,g,h,j,i,k,l,n,m,o,p,q,r,s,d=this;if(b&&d.fireEvent("beforeinserthtml",b)!==!0){if(e=d.selection.getRange(),f=e.document.createElement("div"),f.style.display="inline",c||(g=UE.htmlparser(b),d.options.filterRules&&UE.filterNode(g,d.options.filterRules),d.filterInputRule(g),b=g.toHtml()),f.innerHTML=utils.trim(b),!e.collapsed&&(h=e.startContainer,domUtils.isFillChar(h)&&e.setStartBefore(h),h=e.endContainer,domUtils.isFillChar(h)&&e.setEndAfter(h),e.txtToElmBoundary(),e.endContainer&&1==e.endContainer.nodeType&&(h=e.endContainer.childNodes[e.endOffset],h&&domUtils.isBr(h)&&e.setEndAfter(h)),0==e.startOffset&&(h=e.startContainer,domUtils.isBoundaryNode(h,"firstChild")&&(h=e.endContainer,e.endOffset==(3==h.nodeType?h.nodeValue.length:h.childNodes.length)&&domUtils.isBoundaryNode(h,"lastChild")&&(d.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",e.setStart(d.body.firstChild,0).collapse(!0)))),!e.collapsed&&e.deleteContents(),1==e.startContainer.nodeType&&(i=e.startContainer.childNodes[e.startOffset],i&&domUtils.isBlockElm(i)&&(j=i.previousSibling)&&domUtils.isBlockElm(j)))){for(e.setEnd(j,j.childNodes.length).collapse();i.firstChild;)j.appendChild(i.firstChild);domUtils.remove(i)}if(m=0,e.inFillChar()&&(i=e.startContainer,domUtils.isFillChar(i)?(e.setStartBefore(i).collapse(!0),domUtils.remove(i)):domUtils.isFillChar(i,!0)&&(i.nodeValue=i.nodeValue.replace(fillCharReg,""),e.startOffset--,e.collapsed&&e.collapse(!0))),o=domUtils.findParentByTagName(e.startContainer,"li",!0)){for(;i=f.firstChild;){for(;i&&(3==i.nodeType||!domUtils.isBlockElm(i)||"HR"==i.tagName);)p=i.nextSibling,e.insertNode(i).collapse(),q=i,i=p;if(i)if(/^(ol|ul)$/i.test(i.tagName)){for(;i.firstChild;)q=i.firstChild,domUtils.insertAfter(o,i.firstChild),o=o.nextSibling;domUtils.remove(i)}else p=i.nextSibling,r=d.document.createElement("li"),domUtils.insertAfter(o,r),r.appendChild(i),q=i,i=p,o=r}o=domUtils.findParentByTagName(e.startContainer,"li",!0),domUtils.isEmptyBlock(o)&&domUtils.remove(o),q&&e.setStartAfter(q).collapse(!0).select(!0)}else{for(;i=f.firstChild;){if(m){for(s=d.document.createElement("p");i&&(3==i.nodeType||!dtd.$block[i.tagName]);)n=i.nextSibling,s.appendChild(i),i=n;s.firstChild&&(i=s)}if(e.insertNode(i),n=i.nextSibling,!m&&i.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(i)&&(k=domUtils.findParent(i,function(a){return domUtils.isBlockElm(a)}),k&&"body"!=k.tagName.toLowerCase()&&(!dtd[k.tagName][i.nodeName]||i.parentNode!==k))){if(dtd[k.tagName][i.nodeName])for(l=i.parentNode;l!==k;)j=l,l=l.parentNode;else j=k;domUtils.breakParent(i,j||l),j=i.previousSibling,domUtils.trimWhiteTextNode(j),j.childNodes.length||domUtils.remove(j),!browser.ie&&(p=i.nextSibling)&&domUtils.isBlockElm(p)&&p.lastChild&&!domUtils.isBr(p.lastChild)&&p.appendChild(d.document.createElement("br")),m=1}if(p=i.nextSibling,!f.firstChild&&p&&domUtils.isBlockElm(p)){e.setStart(p,0).collapse(!0);break}e.setEndAfter(i).collapse()}if(i=e.startContainer,n&&domUtils.isBr(n)&&domUtils.remove(n),domUtils.isBlockElm(i)&&domUtils.isEmptyNode(i))if(n=i.nextSibling)domUtils.remove(i),1==n.nodeType&&dtd.$block[n.tagName]&&e.setStart(n,0).collapse(!0).shrinkBoundary();else try{i.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(t){e.setStartBefore(i),domUtils.remove(i)}try{e.select(!0)}catch(t){}}setTimeout(function(){e=d.selection.getRange(),e.scrollToView(d.autoHeightEnabled,d.autoHeightEnabled?domUtils.getXY(d.iframe).y:0),d.fireEvent("afterinserthtml",b)},200)}}},UE.plugins["autotypeset"]=function(){function g(a,b){return a&&3!=a.nodeType?domUtils.isBr(a)?1:a&&a.parentNode&&e[a.tagName.toLowerCase()]?f&&f.contains(a)||a.getAttribute("pagebreak")?0:b?!domUtils.isEmptyBlock(a):domUtils.isEmptyBlock(a,new RegExp("[\\s"+domUtils.fillChar+"]","g")):void 0:0}function h(a){a.style.cssText||(domUtils.removeAttributes(a,["style"]),"span"==a.tagName.toLowerCase()&&domUtils.hasNoAttributes(a)&&domUtils.remove(a,!0))}function i(a,e){var l,m,o,n,q,p,r,s,u,t,v,w,x,i=this;if(e){if(!b.pasteFilter)return;l=i.document.createElement("div"),l.innerHTML=e.html}else l=i.document.body;for(m=domUtils.getElementsByTagName(l,"*"),n=0;o=m[n++];)if(i.fireEvent("excludeNodeinautotype",o)!==!0){if(b.clearFontSize&&o.style.fontSize&&(domUtils.removeStyle(o,"font-size"),h(o)),b.clearFontFamily&&o.style.fontFamily&&(domUtils.removeStyle(o,"font-family"),h(o)),g(o)){if(b.mergeEmptyline)for(p=o.nextSibling,r=domUtils.isBr(o);g(p)&&(q=p,p=q.nextSibling,!r||p&&(!p||domUtils.isBr(p)));)domUtils.remove(q);if(b.removeEmptyline&&domUtils.inDoc(o,l)&&!d[o.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(o)&&(p=o.nextSibling,p&&!domUtils.isBr(p)))continue;domUtils.remove(o);continue}}if(g(o,!0)&&"SPAN"!=o.tagName&&(b.indent&&(o.style.textIndent=b.indentValue),b.textAlign&&(o.style.textAlign=b.textAlign)),b.removeClass&&o.className&&!c[o.className.toLowerCase()]){if(f&&f.contains(o))continue;domUtils.removeAttributes(o,["class"])}if(b.imageBlockLine&&"img"==o.tagName.toLowerCase()&&!o.getAttribute("emotion"))if(e)switch(s=o,b.imageBlockLine){case"left":case"right":case"none":for(t=s.parentNode;dtd.$inline[t.tagName]||"A"==t.tagName;)t=t.parentNode;if(q=t,"P"==q.tagName&&"center"==domUtils.getStyle(q,"text-align")&&!domUtils.isBody(q)&&1==domUtils.getChildCount(q,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)}))if(u=q.previousSibling,p=q.nextSibling,u&&p&&1==u.nodeType&&1==p.nodeType&&u.tagName==p.tagName&&domUtils.isBlockElm(u)){for(u.appendChild(q.firstChild);p.firstChild;)u.appendChild(p.firstChild);domUtils.remove(q),domUtils.remove(p)}else domUtils.setStyle(q,"text-align","");domUtils.setStyle(s,"float",b.imageBlockLine);break;case"center":if("center"!=i.queryCommandValue("imagefloat")){for(t=s.parentNode,domUtils.setStyle(s,"float","none"),q=s;t&&1==domUtils.getChildCount(t,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)})&&(dtd.$inline[t.tagName]||"A"==t.tagName);)q=t,t=t.parentNode;v=i.document.createElement("p"),domUtils.setAttributes(v,{style:"text-align:center"}),q.parentNode.insertBefore(v,q),v.appendChild(q),domUtils.setStyle(q,"float","")}}else w=i.selection.getRange(),w.selectNode(o).select(),i.execCommand("imagefloat",b.imageBlockLine);b.removeEmptyNode&&b.removeTagNames[o.tagName.toLowerCase()]&&domUtils.hasNoAttributes(o)&&domUtils.isEmptyBlock(o)&&domUtils.remove(o)}b.tobdc&&(x=UE.htmlparser(l.innerHTML),x.traversal(function(a){"text"==a.type&&(a.data=k(a.data))}),l.innerHTML=x.toHtml()),b.bdc2sb&&(x=UE.htmlparser(l.innerHTML),x.traversal(function(a){"text"==a.type&&(a.data=j(a.data))}),l.innerHTML=x.toHtml()),e&&(e.html=l.innerHTML)}function j(a){var c,d,b="";for(c=0;c<a.length;c++)d=a.charCodeAt(c),b+=d>=65281&&65373>=d?String.fromCharCode(a.charCodeAt(c)-65248):12288==d?String.fromCharCode(a.charCodeAt(c)-12288+32):a.charAt(c);return b}function k(a){var b,d;for(a=utils.html(a),b="",d=0;d<a.length;d++)b+=32==a.charCodeAt(d)?String.fromCharCode(12288):a.charCodeAt(d)<127?String.fromCharCode(a.charCodeAt(d)+65248):a.charAt(d);return b}function l(){var b=a.getPreferences("autotypeset");utils.extend(a.options.autotypeset,b)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var f,a=this,b=a.options.autotypeset,c={selectTdClass:1,pagebreak:1,anchorclass:1},d={li:1},e={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};b&&(l(),b.pasteFilter&&a.addListener("beforepaste",i),a.commands["autotypeset"]={execCommand:function(){a.removeListener("beforepaste",i),b.pasteFilter&&a.addListener("beforepaste",i),i.call(a)}})},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var a=this,b=domUtils.findParentByTagName(a.iframe,"form",!1);if(b){if(a.fireEvent("beforesubmit")===!1)return;a.sync(),b.submit()}}}}}}),UE.plugin.register("background",function(){function e(a){var b={},c=a.split(";");return utils.each(c,function(a){var c=a.indexOf(":"),d=utils.trim(a.substr(0,c)).toLowerCase();d&&(b[d]=utils.trim(a.substr(c+1)||""))}),b}function f(c){var d,e;if(c){d=[];for(e in c)c.hasOwnProperty(e)&&d.push(e+":"+c[e]+"; ");utils.cssRule(b,d.length?"body{"+d.join("")+"}":"",a.document)}else utils.cssRule(b,"",a.document)}var c,a=this,b="editor_background",d=new RegExp("body[\\s]*\\{(.+)\\}","i"),g=a.hasContents;return a.hasContents=function(){return a.queryCommandValue("background")?!0:g.apply(a,arguments)},{bindEvents:{getAllHtml:function(b,c){var g,h,i,d=this.body,e=domUtils.getComputedStyle(d,"background-image"),f="";f=e.indexOf(a.options.imagePath)>0?e.substring(e.indexOf(a.options.imagePath),e.length-1).replace(/"|\(|\)/gi,""):"none"!=e?e.replace(/url\("?|"?\)/gi,""):"",g='<style type="text/css">body{',h={"background-color":domUtils.getComputedStyle(d,"background-color")||"#ffffff","background-image":f?"url("+f+")":"","background-repeat":domUtils.getComputedStyle(d,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(d,"background-position-x")+" "+domUtils.getComputedStyle(d,"background-position-y"):domUtils.getComputedStyle(d,"background-position"),height:domUtils.getComputedStyle(d,"height")};
for(i in h)h.hasOwnProperty(i)&&(g+=i+":"+h[i]+"; ");g+="}</style> ",c.push(g)},aftersetcontent:function(){0==c&&f()}},inputRule:function(a){c=!1,utils.each(a.getNodesByTagName("p"),function(a){var b=a.getAttr("data-background");b&&(c=!0,f(e(b)),a.parentNode.removeChild(a))})},outputRule:function(a){var c=this,e=(utils.cssRule(b,c.document)||"").replace(/[\n\r]+/g,"").match(d);e&&a.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(e[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(a,b){f(b)},queryCommandValue:function(){var a=this,c=(utils.cssRule(b,a.document)||"").replace(/[\n\r]+/g,"").match(d);return c?e(c[1]):null},notNeedUndo:!0}}}}),UE.commands["imagefloat"]={execCommand:function(a,b){var e,g,h,i,f,c=this,d=c.selection.getRange();if(!d.collapsed&&(e=d.getClosedNode(),e&&"IMG"==e.tagName))switch(b){case"left":case"right":case"none":for(f=e.parentNode;dtd.$inline[f.tagName]||"A"==f.tagName;)f=f.parentNode;if(g=f,"P"==g.tagName&&"center"==domUtils.getStyle(g,"text-align")){if(!domUtils.isBody(g)&&1==domUtils.getChildCount(g,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)}))if(h=g.previousSibling,i=g.nextSibling,h&&i&&1==h.nodeType&&1==i.nodeType&&h.tagName==i.tagName&&domUtils.isBlockElm(h)){for(h.appendChild(g.firstChild);i.firstChild;)h.appendChild(i.firstChild);domUtils.remove(g),domUtils.remove(i)}else domUtils.setStyle(g,"text-align","");d.selectNode(e).select()}domUtils.setStyle(e,"float","none"==b?"":b),"none"==b&&domUtils.removeAttributes(e,"align");break;case"center":if("center"!=c.queryCommandValue("imagefloat")){for(f=e.parentNode,domUtils.setStyle(e,"float",""),domUtils.removeAttributes(e,"align"),g=e;f&&1==domUtils.getChildCount(f,function(a){return!domUtils.isBr(a)&&!domUtils.isWhitespace(a)})&&(dtd.$inline[f.tagName]||"A"==f.tagName);)g=f,f=f.parentNode;d.setStartBefore(g).setCursor(!1),f=c.document.createElement("div"),f.appendChild(g),domUtils.setStyle(g,"float",""),c.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+f.innerHTML+"</p>"),g=c.document.getElementById("_img_parent_tmp"),g.removeAttribute("id"),g=g.firstChild,d.selectNode(g).select(),i=g.parentNode.nextSibling,i&&domUtils.isEmptyNode(i)&&domUtils.remove(i)}}},queryCommandValue:function(){var b,c,a=this.selection.getRange();return a.collapsed?"none":(b=a.getClosedNode(),b&&1==b.nodeType&&"IMG"==b.tagName?(c=domUtils.getComputedStyle(b,"float")||b.getAttribute("align"),"none"==c&&(c="center"==domUtils.getComputedStyle(b.parentNode,"text-align")?"center":c),{left:1,right:1,center:1}[c]?c:"none"):"none")},queryCommandState:function(){var b,a=this.selection.getRange();return a.collapsed?-1:(b=a.getClosedNode(),b&&1==b.nodeType&&"IMG"==b.tagName?0:-1)}},UE.commands["insertimage"]={execCommand:function(a,b){var c,d,e,f,g,j,h,i,k;if(b=utils.isArray(b)?b:[b],b.length&&(c=this,d=c.selection.getRange(),e=d.getClosedNode(),c.fireEvent("beforeinsertimage",b)!==!0)){if(!e||!/img/i.test(e.tagName)||"edui-faked-video"==e.className&&-1==e.className.indexOf("edui-upload-video")||e.getAttribute("word_img")){if(h=[],i="",j=b[0],1==b.length)i='<img src="'+j.src+'" '+(j._src?' _src="'+j._src+'" ':"")+(j.width?'width="'+j.width+'" ':"")+(j.height?' height="'+j.height+'" ':"")+("left"==j["floatStyle"]||"right"==j["floatStyle"]?' style="float:'+j["floatStyle"]+';"':"")+(j.title&&""!=j.title?' title="'+j.title+'"':"")+(j.border&&"0"!=j.border?' border="'+j.border+'"':"")+(j.alt&&""!=j.alt?' alt="'+j.alt+'"':"")+(j.hspace&&"0"!=j.hspace?' hspace = "'+j.hspace+'"':"")+(j.vspace&&"0"!=j.vspace?' vspace = "'+j.vspace+'"':"")+"/>","center"==j["floatStyle"]&&(i='<p style="text-align: center">'+i+"</p>"),h.push(i);else for(k=0;j=b[k++];)i="<p "+("center"==j["floatStyle"]?'style="text-align: center" ':"")+'><img src="'+j.src+'" '+(j.width?'width="'+j.width+'" ':"")+(j._src?' _src="'+j._src+'" ':"")+(j.height?' height="'+j.height+'" ':"")+' style="'+(j["floatStyle"]&&"center"!=j["floatStyle"]?"float:"+j["floatStyle"]+";":"")+(j.border||"")+'" '+(j.title?' title="'+j.title+'"':"")+" /></p>",h.push(i);c.execCommand("insertHtml",h.join(""))}else f=b.shift(),g=f["floatStyle"],delete f["floatStyle"],domUtils.setAttributes(e,f),c.execCommand("imagefloat",g),b.length>0&&(d.setStartAfter(e).setCursor(!1,!0),c.execCommand("insertimage",b));c.fireEvent("afterinsertimage",b)}}},UE.plugins["justify"]=function(){var b=domUtils.isBlockElm,c={left:1,right:1,center:1,justify:1},d=function(a,c){var i,f,g,h,j,k,l,d=a.createBookmark(),e=function(a){return 1==a.nodeType?"br"!=a.tagName.toLowerCase()&&!domUtils.isBookmarkNode(a):!domUtils.isWhitespace(a)};for(a.enlarge(!0),f=a.createBookmark(),g=domUtils.getNextDomNode(f.start,!1,e),h=a.cloneRange();g&&!(domUtils.getPosition(g,f.end)&domUtils.POSITION_FOLLOWING);)if(3!=g.nodeType&&b(g))g=domUtils.getNextDomNode(g,!0,e);else{for(h.setStartBefore(g);g&&g!==f.end&&!b(g);)i=g,g=domUtils.getNextDomNode(g,!1,null,function(a){return!b(a)});h.setEndAfter(i),j=h.getCommonAncestor(),!domUtils.isBody(j)&&b(j)?(domUtils.setStyles(j,utils.isString(c)?{"text-align":c}:c),g=j):(k=a.document.createElement("p"),domUtils.setStyles(k,utils.isString(c)?{"text-align":c}:c),l=h.extractContents(),k.appendChild(l),h.insertNode(k),g=k),g=domUtils.getNextDomNode(g,!1,e)}return a.moveToBookmark(f).moveToBookmark(d)};UE.commands["justify"]={execCommand:function(a,b){var e,c=this.selection.getRange();return c.collapsed&&(e=this.document.createTextNode("p"),c.insertNode(e)),d(c,b),e&&(c.setStartBefore(e).collapse(!0),domUtils.remove(e)),c.select(),!0},queryCommandValue:function(){var a=this.selection.getStart(),b=domUtils.getComputedStyle(a,"text-align");return c[b]?b:"left"},queryCommandState:function(){var a=this.selection.getStart(),b=a&&domUtils.findParentByTagName(a,["td","th","caption"],!0);return b?-1:0}}},UE.plugins["font"]=function(){function e(a){for(var b;(b=a.parentNode)&&"SPAN"==b.tagName&&1==domUtils.getChildCount(b,function(a){return!domUtils.isBookmarkNode(a)&&!domUtils.isBr(a)});)b.style.cssText+=a.style.cssText,domUtils.remove(a,!0),a=b}function f(a,b,c){var e,f;d[b]&&(a.adjustmentBoundary(),a.collapsed||1!=a.startContainer.nodeType||(e=a.startContainer.childNodes[a.startOffset],e&&domUtils.isTagNode(e,"span")&&(f=a.createBookmark(),utils.each(domUtils.getElementsByTagName(e,"span"),function(a){a.parentNode&&!domUtils.isBookmarkNode(a)&&("backcolor"!=b||domUtils.getComputedStyle(a,"background-color").toLowerCase()!==c)&&(domUtils.removeStyle(a,d[b]),0==a.style.cssText.replace(/^\s+$/,"").length&&domUtils.remove(a,!0))}),a.moveToBookmark(f))))}function g(a,b,c){var h,d=a.collapsed,g=a.createBookmark();if(d)for(h=g.start.parentNode;dtd.$inline[h.tagName];)h=h.parentNode;else h=domUtils.getCommonAncestor(g.start,g.end);utils.each(domUtils.getElementsByTagName(h,"span"),function(a){var d,f;if(a.parentNode&&!domUtils.isBookmarkNode(a)){if(/\s*border\s*:\s*none;?\s*/i.test(a.style.cssText))return/^\s*border\s*:\s*none;?\s*$/.test(a.style.cssText)?domUtils.remove(a,!0):domUtils.removeStyle(a,"border"),void 0;if(/border/i.test(a.style.cssText)&&"SPAN"==a.parentNode.tagName&&/border/i.test(a.parentNode.style.cssText)&&(a.style.cssText=a.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=b||"none"!=c)for(d=a.nextSibling;d&&1==d.nodeType&&"SPAN"==d.tagName;)if(domUtils.isBookmarkNode(d)&&"fontborder"==b)a.appendChild(d),d=a.nextSibling;else{if(d.style.cssText==a.style.cssText&&(domUtils.moveChild(d,a),domUtils.remove(d)),a.nextSibling===d)break;d=a.nextSibling}e(a),browser.ie&&browser.version>8&&(f=domUtils.findParent(a,function(a){return"SPAN"==a.tagName&&/background-color/.test(a.style.cssText)}),f&&!/background-color/.test(a.style.cssText)&&(a.style.backgroundColor=f.style.backgroundColor))}}),a.moveToBookmark(g),f(a,b,c)}var h,a=this,b={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},c={underline:1,strikethrough:1,fontborder:1},d={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};a.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),a.addInputRule(function(a){utils.each(a.getNodesByTagName("u s del font strike"),function(a){var b,c,d;if("font"==a.tagName){b=[];for(c in a.attrs)switch(c){case"size":b.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[a.attrs[c]]||a.attrs[c])+"px");break;case"color":b.push("color:"+a.attrs[c]);break;case"face":b.push("font-family:"+a.attrs[c]);break;case"style":b.push(a.attrs[c])}a.attrs={style:b.join(";")}}else d="u"==a.tagName?"underline":"line-through",a.attrs={style:(a.getAttr("style")||"")+"text-decoration:"+d+";"};a.tagName="span"})});for(h in b)!function(a,b){UE.commands[a]={execCommand:function(d,e){var i,f,h,j,k;if(e=e||(this.queryCommandState(d)?"none":"underline"==d?"underline":"fontborder"==d?"1px solid #000":"line-through"),f=this,h=this.selection.getRange(),"default"==e)h.collapsed&&(i=f.document.createTextNode("font"),h.insertNode(i).select()),f.execCommand("removeFormat","span,a",b),i&&(h.setStartBefore(i).collapse(!0),domUtils.remove(i)),g(h,d,e),h.select();else if(h.collapsed){if(j=domUtils.findParentByTagName(h.startContainer,"span",!0),i=f.document.createTextNode("font"),!j||j.children.length||j[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){if(h.insertNode(i),h.selectNode(i).select(),j=h.document.createElement("span"),c[a]){if(domUtils.findParentByTagName(i,"a",!0))return h.setStartBefore(i).setCursor(),domUtils.remove(i),void 0;f.execCommand("removeFormat","span,a",b)}if(j.style.cssText=b+":"+e,i.parentNode.insertBefore(j,i),!browser.ie||browser.ie&&9==browser.version)for(k=j.parentNode;!domUtils.isBlockElm(k);)"SPAN"==k.tagName&&(j.style.cssText=k.style.cssText+";"+j.style.cssText),k=k.parentNode;opera?setTimeout(function(){h.setStart(j,0).collapse(!0),g(h,d,e),h.select()}):(h.setStart(j,0).collapse(!0),g(h,d,e),h.select())}else h.insertNode(i),c[a]&&(h.selectNode(i).select(),f.execCommand("removeFormat","span,a",b,null),j=domUtils.findParentByTagName(i,"span",!0),h.setStartBefore(i)),j&&(j.style.cssText+=";"+b+":"+e),h.collapse(!0).select();domUtils.remove(i)}else c[a]&&f.queryCommandValue(a)&&f.execCommand("removeFormat","span,a",b),h=f.selection.getRange(),h.applyInlineStyle("span",{style:b+":"+e}),g(h,d,e),h.select();return!0},queryCommandValue:function(a){var e,d,g,f,h,c=this.selection.getStart();if("underline"==a||"strikethrough"==a){for(d=c;d&&!domUtils.isBlockElm(d)&&!domUtils.isBody(d);){if(1==d.nodeType&&(e=domUtils.getComputedStyle(d,b),"none"!=e))return e;d=d.parentNode}return"none"}if("fontborder"==a){for(f=c;f&&dtd.$inline[f.tagName];){if((g=domUtils.getComputedStyle(f,"border"))&&/1px/.test(g)&&/solid/.test(g))return g;f=f.parentNode}return""}return"FontSize"==a?(h=domUtils.getComputedStyle(c,b),f=/^([\d\.]+)(\w+)$/.exec(h),f?Math.floor(f[1])+f[2]:h):domUtils.getComputedStyle(c,b)},queryCommandState:function(a){if(!c[a])return 0;var b=this.queryCommandValue(a);return"fontborder"==a?/1px/.test(b)&&/solid/.test(b):"underline"==a?/underline/.test(b):/line\-through/.test(b)}}}(h,b[h])},UE.plugins["link"]=function(){function a(a){var b=a.startContainer,c=a.endContainer;(b=domUtils.findParentByTagName(b,"a",!0))&&a.setStartBefore(b),(c=domUtils.findParentByTagName(c,"a",!0))&&a.setEndAfter(c)}function b(b,c,d){var g,h,i,e=b.cloneRange(),f=d.queryCommandValue("link");a(b=b.adjustmentBoundary()),g=b.startContainer,1==g.nodeType&&f&&(g=g.childNodes[b.startOffset],g&&1==g.nodeType&&"A"==g.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(g[browser.ie?"innerText":"textContent"])&&(g[browser.ie?"innerText":"textContent"]=utils.html(c.textValue||c.href))),(!e.collapsed||f)&&(b.removeInlineStyle("a"),e=b.cloneRange()),e.collapsed?(h=b.document.createElement("a"),i="",c.textValue?(i=utils.html(c.textValue),delete c.textValue):i=utils.html(c.href),domUtils.setAttributes(h,c),g=domUtils.findParentByTagName(e.startContainer,"a",!0),g&&domUtils.isInNodeEndBoundary(e,g)&&b.setStartAfter(g).collapse(!0),h[browser.ie?"innerText":"textContent"]=i,b.insertNode(h).selectNode(h)):b.applyInlineStyle("a",c)}UE.commands["unlink"]={execCommand:function(){var c,b=this.selection.getRange();(!b.collapsed||domUtils.findParentByTagName(b.startContainer,"a",!0))&&(c=b.createBookmark(),a(b),b.removeInlineStyle("a").moveToBookmark(c).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands["link"]={execCommand:function(a,c){var d;c._href&&(c._href=utils.unhtml(c._href,/[<">]/g)),c.href&&(c.href=utils.unhtml(c.href,/[<">]/g)),c.textValue&&(c.textValue=utils.unhtml(c.textValue,/[<">]/g)),b(d=this.selection.getRange(),c,this),d.collapse().select(!0)},queryCommandValue:function(){var b,c,d,e,g,h,f,j,i,a=this.selection.getRange();if(!a.collapsed){if(a.shrinkBoundary(),c=3!=a.startContainer.nodeType&&a.startContainer.childNodes[a.startOffset]?a.startContainer.childNodes[a.startOffset]:a.startContainer,d=3==a.endContainer.nodeType||0==a.endOffset?a.endContainer:a.endContainer.childNodes[a.endOffset-1],e=a.getCommonAncestor(),b=domUtils.findParentByTagName(e,"a",!0),!b&&1==e.nodeType)for(f=e.getElementsByTagName("a"),i=0;j=f[i++];)if(g=domUtils.getPosition(j,c),h=domUtils.getPosition(j,d),(g&domUtils.POSITION_FOLLOWING||g&domUtils.POSITION_CONTAINS)&&(h&domUtils.POSITION_PRECEDING||h&domUtils.POSITION_CONTAINS)){b=j;break}return b}return b=a.startContainer,b=1==b.nodeType?b:b.parentNode,b&&(b=domUtils.findParentByTagName(b,"a",!0))&&!domUtils.isInNodeEndBoundary(a,b)?b:void 0},queryCommandState:function(){var a=this.selection.getRange().getClosedNode(),b=a&&("edui-faked-video"==a.className||-1!=a.className.indexOf("edui-upload-video"));return b?-1:0}}},UE.plugins["insertframe"]=function(){function b(){a._iframe&&delete a._iframe}var a=this;a.addListener("selectionchange",function(){b()})},UE.plugins["audio"]=function(){function e(a,b,e){var f='<div class="audio-wrapper" id="'+a+'" style="background-color: #fcfcfc;margin: 10px auto;max-width: 670px;height: 90px;border: 1px solid #e0e0e0;">'+'<audio><source src="'+b+'"></audio>'+'<div class="audio-left" style="float: left;text-align: center;width: 22%;height: 100%;">'+'<img src="'+c+'" class="playicon" style="width: 40px;position: relative;top: 25px;margin: 0;display: initial;cursor: pointer;"/>'+'<img src="'+d+'" class="pauseicon" style="width: 40px;position: relative;top: 25px;margin: 0;display: none;cursor: pointer;"/>'+"</div>"+'<div class="audio-right" style="margin-right: 5%;float: right;width: 73%;height: 100%;">'+'<p class="audio-title" style="max-width: 536px;font-size: 15px;height: 35%;margin: 8px 0;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;">'+e+"</p>"+'<div class="progress-bar-bg" style="background-color: #d9d9d9;position: relative;height: 2px;cursor: pointer;">'+'<span class="progress-dot" style="content: \' \';width: 12px;height: 12px;border-radius: 50%;-moz-border-radius: 50%;-webkit-border-radius: 50%;background-color: #3e87e8;position: absolute;left: 0;top: -5px;margin-left: 0px;cursor: pointer;"></span>'+'<div class="progress-bar" style="background-color: #649fec;width: 0;height: 2px;"></div>'+"</div>"+'<div class="audio-time" style="overflow: hidden;margin-top: -1px;">'+'<span class="audio-length-current" style="float: left;margin-top:10px;font-size: 12px;color: #969696">00:00</span><span class="audio-length-total" style="float: right;margin-top:10px;font-size: 12px;color: #969696"></span>'+"</div>"+"</div>"+"</div><br/>";return f}function f(b){var c,d;if(b)for(c=0;c<b.length;c++)d=a.document.getElementById(b[c].key),g(d)}function g(b){var d,e,f,g,k,l,m,n,o,p,q,r,s,t,u,c=domUtils.getElementsByTagName(b,"div");console.log("divArr",c),d=domUtils.getElementsByTagName(b,"audio")[0],e=domUtils.filterNodeList(c,function(a){return"audio-right"===a.className}),f=domUtils.getElementsByTagName(e,"p")[0],domU